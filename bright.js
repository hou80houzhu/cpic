/*!
 * BrightJS JavaScript Library v1.0.2
 * http://brightjs.org/
 * Author WangJinliang(hou80houzhu)
 * licensed under the MIT licenses.
 * https://github.com/hou80houzhu/brightjs/blob/master/LICENSE
 */
!function(){"use strict";var t=function(t){return new u(t)},e=function(){var t={kenel:[{n:"webkit",g:/applewebkit\/([\d.]+)/},{n:"gecko",g:/gecko\/([\d.]+)/},{n:"trident",g:/trident\/([\d.]+)/},{n:"edge",g:/edge\/([\d.]+)/}],info:[{n:"chrome",g:/chrome\/([\d.]+)/},{n:"mozilla",g:/mozilla\/([\d.]+)/},{n:"firefox",g:/firefox\/([\d.]+)/},{n:"msie",g:/msie ([\d.]+)/},{n:"opera",g:/opera\/([\d.]+)/},{n:"safari",g:/safari\/([\d.]+)/},{n:"blackberry",g:/blackberry ([\d.]+)/},{n:"blackberry",g:/edge ([\d.]+)/}],os:[{n:"windows",g:/windows ([a-z\d. ]+)/},{n:"osx",g:/mac os x ([a-z\d. ]+)/},{n:"ios",g:/os ([a-z\d. _]+)/},{n:"linux",g:/linux ([a-z\d. _]+)/},{n:"linux",g:/linux/},{n:"blackberry",g:/blackberry ([a-z\d. ]+)/},{n:"blackberry",g:/bb[0-9]+/},{n:"windowsphone",g:/windows phone/}],mobile:[{n:"android",g:/android ([\d.]+)/},{n:"iphone",g:/iphone/},{n:"ipad",g:/ipad/},{n:"blackberry",g:/bb[0-9]+/},{n:"blackberry",g:/blackberry/},{n:"windowsphone",g:/iemobile/}]},e=window.navigator.userAgent.toLowerCase(),n={};for(var i in t){var r=!1;for(var s in t[i]){var o=t[i][s],a=e.match(o.g);if(a){var l=a[0].match(/[0-9._]+/);n[i]={name:o.n,version:l?l[0]:"unknow"},r=!0;break}}r||(n[i]={name:"unknow",version:"unknow"})}return n.kenel&&"trident"===n.kenel.name&&"7.0"===n.kenel.version&&(n.info={name:"msie",version:"11"}),n.name=function(){return n.info.name},n.version=function(){return n.info.verison},n.isMobile=function(){return"unknow"!==this.mobile.name},n.isAndroid=function(t){return 0===arguments.length?"android"===this.mobile.name:"android"===this.mobile.name&&parseInt(this.mobile.version)===parseInt(t)},n.isIos=function(t){return 0===arguments.length?"iphone"===this.mobile.name||"ipad"===this.mobile.name:("iphone"===this.mobile.name||"ipad"===this.mobile.name)&&parseInt(this.mobile.version)===parseInt(t)},n.isWebkit=function(t){return 0===arguments.length?"webkit"===this.kenel.name:"webkit"===this.kenel.name&&parseInt(this.kenel.version)===parseInt(t)},n.isGecko=function(t){return 0===arguments.length?"gecko"===this.kenel.name:"gecko"===this.kenel.name&&parseInt(this.kenel.version)===parseInt(t)},n.isTrident=function(){return"trident"===this.kenel.name},n.isEdge=function(){return"edge"===this.kenel.name},n.isIe=function(t){return 0===arguments.length?"msie"===this.info.name:"msie"===this.info.name&&parseInt(this.info.version)===parseInt(t)},n.isSupport=function(){return"webkit"===this.kenel.name||"gecko"===this.kenel.name||"trident"===this.kenel.name&&this.kenel.version/1>=6},n}(),n={isFunction:function(t){return"function"==typeof t&&t.constructor===Function},isEmptyObject:function(t){for(var e in t)return!1;return!0},isUndefined:function(t){return void 0===t},isWindow:function(t){return void 0!==t&&null!==t&&t===t.window},isDocument:function(t){return null!==t&&t.nodeType===t.DOCUMENT_NODE},isObject:function(t){return"object"==typeof t&&"[object object]"===Object.prototype.toString.call(t).toLowerCase()&&!t.length},isString:function(t){return"string"==typeof t&&t.constructor===String},isNumber:function(t){return"number"==typeof t},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},isAvalid:function(t){return null!==t&&void 0!==t},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},isQueryString:function(t){return n.isString(t)&&/(^|&).*=([^&]*)(&|$)/.test(t)},isElement:function(t){return t&&1===t.nodeType&&t.nodeName}},i={postData:function(t){if(t){if(t instanceof FormData||t instanceof Blob||t instanceof ArrayBuffer)return t;if(n.isObject(t)){var e=!1;for(var s in t)if(t[s]instanceof Blob||t[s]instanceof ArrayBuffer||t[s]instanceof File){e=!0;break}if(e){var o=new FormData;for(var s in t)t[s]instanceof Blob?o.append(s,t[s]):t[s]instanceof File?o.append(s,t[s]):n.isArray(t[s])||n.isObject(t[s])?o.append(s,window.encodeURIComponent(r.stringify(t[s]))):t[s]instanceof FormData||o.append(s,window.encodeURIComponent(t[s].toString()));return o}return i.queryString(t)}return n.isArray(t)?window.encodeURIComponent(r.stringify({key:t})):t}return null},queryString:function(t){var e="";if(t){for(var i in t){var s=t[i];n.isString(s)?e+=i+"="+window.encodeURIComponent(s)+"&":n.isObject(s)||n.isArray(s)?e+=i+"="+window.encodeURIComponent(r.stringify(s))+"&":s instanceof FormData||s instanceof Blob||s instanceof File||s instanceof ArrayBuffer||(e+=i+"="+(void 0!==s&&null!==s?window.encodeURIComponent(s.toString()):"")+"&")}return e.length>0?e.substring(0,e.length-1):""}return""},getURLInfo:function(t){var e=t.indexOf("?"),n=t.indexOf("#"),i="",r="",s=null,o=null,a=t,l=null,p=null;-1!==e&&-1!==n?(a=t.substring(0,e),e>n?(r=t.substring(n+1,e),i=t.substring(e+1)):(i=t.substring(e+1,n),r=t.substring(n+1))):-1!==e?(i=t.substring(e+1),a=t.substring(0,e)):-1!==n&&(r=t.substring(n+1),a=t.substring(0,n));var h=t.match(/:[0-9]+/g),u=t.match(/[a-z]+:\/\//);l=h?h[h.length-1].substring(1):null,p=u?u[0].substring(0,u[0].length-3):null,p&&(a=a.substring(p.length+3)),l&&(a=a.substring(0,a.length-l.length-1));var c=a.substring(0,a.indexOf("/"));if(a=""===c?a:c,""!==i){s={};for(var d=i.split("&"),f=0;f<d.length;f++){var g=d[f].split("=");s[g[0]]=g[1]}}if(""!==r){o={};for(var d=r.split("&"),f=0;f<d.length;f++){var g=d[f].split("=");o[g[0]]=g[1]}}return{query:s,hash:o,host:a,port:l,protocol:p}},queryObject:function(t){return i.getURLInfo(t).query},hashObject:function(t){return i.getURLInfo(t).hash}},r={parse:function(t){return window.JSON.parse(t)},stringify:function(t){return window.JSON.stringify(t)},each:function(t,e){var i,r=0,s=t.length,o=void 0===s||n.isFunction(t);if(o){for(i in t)if(e.call(t[i],i,t[i])===!1)break}else for(;s>r&&e.call(t[r],r,t[r++])!==!1;);return t},clone:function(t){var e;if(n.isArray(t)){e=[];for(var i=0;i<t.length;i++)e[i]=r.clone(t[i]);return e}if(n.isObject(t)){e={};for(var i in t)e[i]=r.clone(t[i]);return e}return t},cover:function(){var t,e,i,s,o,a,l=arguments[0]||{},p=1,h=arguments.length,u=!1;for("boolean"==typeof l&&(u=l,l=arguments[1]||{},p=2),"object"==typeof l||n.isFunction(l)||(l={}),h===p&&(l=this,p-=1);h>p;){if(t=arguments[p],null!==t)for(e in t)i=l[e],s=t[e],l!==s&&(o=n.isArray(s),u&&s&&(n.isObject(s)||o)?(o?(o=!1,a=i&&n.isArray(i)?i:[]):a=i&&n.isObject(i)?i:{},l[e]=r.cover(u,a,s)):void 0!==s&&(l[e]=s));p++}return l}},s=function(){var t={};return e.isWebkit()?(t.prefix="-webkit-",t.transitionEnd="webkitTransitionEnd"):"gecko"===e.isGecko()?(t.prefix="-moz-",t.transitionEnd="transitionend"):(t.prefix="",t.transitionEnd="transitionend"),t.fix=function(t){var e=/^-all-/;if(n.isString(t))return t.replace(e,this.prefix);if(n.isArray(t)){for(var i=[],r=0;r<t.length;r++)i.push(t[r].replace(e,this.prefix));return i}if(n.isObject(t)){var s={};for(var r in t)s[r.replace(e,this.prefix)]=n.isString(t[r])?t[r].replace(e,this.prefix):t[r];return s}return t},t}(),o={uuid:function(){for(var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=new Array(36),i=0,r=0;36>r;r++)8===r||13===r||18===r||23===r?n[r]="-":14===r?n[r]="4":(2>=i&&(i=33554432+16777216*Math.random()|0),t=15&i,i>>=4,n[r]=e[19===r?3&t|8:t]);return n.join("")},getDatasetName:function(t){for(var e="",n=0;n<t.length;n++)e+=/^[A-Z]+$/.test(t.charAt(n))?"-"+t.charAt(n).toLowerCase():t.charAt(n);return"data-"+e},getDatasetReserve:function(t){return t.substring(4).replace(/-[a-zA-Z]{1}/g,function(t){return t[1].toUpperCase()})}};t.json=r,t.is=n,t.browser=e,t.prefix=s,t.util=o,t.serialize=i,t.extend=t.json.cover,t.nfn=function(){};var l=function(){this.list=[],this.length=null,this.current=null,this.state="init",this._start=null,this._progress=null,this._complete=null,this.result=null,this._scope=null};l.prototype.add=function(t,e,n){if("init"!==this.state)throw Error("[bright]-this queue can not add task when it is not in state of init.");return this.list.push({fn:t,parameter:n,error:e||null}),this},l.prototype.scope=function(t){return 0===arguments.length?this._scope:(this._scope=arguments[0],this)},l.prototype.next=function(t){return this._progress&&this._progress.call(this,{total:this.length,runed:this.length-this.list.length,data:t}),l._fire.call(this,t),this},l.prototype.left=function(){return this.list.length},l.prototype.total=function(){return this.length},l.prototype.run=function(t){null===this.length&&(this._start&&this._start.call(this),this.length=this.list.length),this.state="running",l._fire.call(this,t)},l.prototype.stop=function(){return"running"===this.state&&(this.state="stop"),this},l.prototype.reset=function(){return null===this.length,this.state="init",this.result=null,this._scope=null,this},l.prototype.clean=function(){return this.list.length=0,this.state="end",this.length=0,this.reuslt=null,this},l.prototype.isRunning=function(){return"running"===this.state},l.prototype.isEnd=function(){return"end"===this.state},l.prototype.isStop=function(){return"stop"===this.state},l.prototype.start=function(t){return t&&(this._start=t),this},l.prototype.progress=function(t){return t&&(this._progress=t),this},l.prototype.complete=function(t){return t&&(this._complete=t),"end"===this.state&&this._complete.call(this,this.result),this},l.prototype.end=function(t){return this.state="end",this.result=t,this._complete.call(this,this.result),this.reset(),this},l._fire=function(t){if(this.list.length>0){var e=this.list.shift(),n=this;this.current=e;try{e.fn&&e.fn.call(n,t,e.parameter)}catch(i){l.error.call(this,t,i),this.next(t)}}else this.state="end",this.result=t,this._complete&&this._complete.call(this,t);return this},l.error=function(t,e){this.current&&this.current.error&&this.current.error.call(this,t,e,this.current.parameter)},t.queue=function(){return new l};var p=function(){this.state="waiting",this.__list__=[],this.result=null,this.current=null,this._complete=null,this._notify=null,this.waits=1,this._completeTimes=0,this._handleTimes=0};p.prototype.add=function(t,e,n){return this.__list__.push({fn:t,error:e,parameters:n}),"waiting"===this.state&&this.__list__.length===this.waits&&p._fire.call(this,this.result),this},p.prototype.size=function(){return this.__list__.length},p.prototype.wait=function(t){return(0===arguments.length||0===t)&&(t=1e7),this.waits=t,this},p.prototype.work=function(t){return"waiting"===this.state&&(this.waits=1,p.next.call(this,t)),this},p.prototype.delay=function(t){return this.add(function(e){var n=this;setTimeout(function(){n.next(e)},t)}),this},p.prototype.notify=function(t){return t&&(this._notify=t),this},p.prototype.complete=function(t){return t&&(this._complete=t),this},p.prototype.isRunning=function(){return"running"===this.state},p.prototype.isWaiting=function(){return"waiting"===this.state},p.prototype.isHandleAtOnce=function(){return"running"===this.state&&this.__list__.length>0?!1:!0},p.prototype.completeTimes=function(){return this._completeTimes},p.prototype.handleTimes=function(){return this._handleTimes},p.prototype.clean=function(){this.__list__.length=0,this.state="waiting";for(var t in this)this[t]=null},p.prototype.next=function(t){return p.next.call(this,t),this},p.prototype.error=function(t){return p.error.call(this,t)},p.next=function(t){return this._notify&&this._notify.call(this,t),p._fire.call(this,t),this},p.error=function(t){return this.current&&this.current.error&&this.current.error(this,t),this},p._fire=function(t){if(this.__list__.length>0){this.state="running",this._handleTimes=this._handleTimes+1;var e=this.__list__.shift(),n=this;this.current=e;try{e.fn&&e.fn.call(n,t,e.parameters)}catch(i){p.error.call(i),p.next.call(n,t)}}else"running"===this.state&&(this.result=t,this.state="waiting",this._completeTimes=this._completeTimes+1,this.current=null),this._complete&&this._complete.call(this,t);return this},t.dynamicQueue=function(){return new p};var h=function(t){this.state=0,this.queue=new p,this._finally=null,this._notify=null,this._complete=null,this._result=null,this._scope=null;var e=this;this.queue.complete(function(t){e._result=t;var n=e._finally&&e._finally.call(e,t);n instanceof h?n.complete(function(t){e._result=t,e._complete&&e._complete.call(e,t)}):e._complete&&e._complete.call(e,t)}).notify(function(t){e._notify&&e._notify(t)}),n.isFunction(t)?(this.queue.wait(),this.done(function(t){return t}),t(function(t){e.resolve(t)},function(t){e.reject(t)})):t?(this._result=t,this.state=1,this.queue.add(function(){this.next(t)})):(this.queue.wait(),this.done(function(t){return t}))};h.prototype.scope=function(t){return 1===arguments.length?(this._scope=t,this):this._scope},h.prototype.then=function(t,e){return h.add.call(this,t,1),h.add.call(this,e,2),this},h.prototype.wait=function(t){return this.queue.add(function(e){var n=this;t.call(n,function(t){n.next(t)},e)}),this},h.prototype.done=function(t){return h.add.call(this,t,1),this},h.prototype.fail=function(t){return h.add.call(this,t,2),this},h.prototype.always=function(t){return n.isFunction(t)&&(this._finally=t),this},h.prototype.reject=function(t){return this.state=2,this.queue.work(t),this},h.prototype.resolve=function(t){return this.state=1,this.queue.work(t),this},h.prototype.notify=function(t){return n.isFunction(t)&&(this._notify=t),this},h.prototype.complete=function(t){return n.isFunction(t)&&(this._complete=t),this},h.prototype.delay=function(t){return this.queue.delay(t),this},h.prototype.clean=function(){this.queue.clean();for(var t in this)this[t]=null},h.add=function(t,e){var i=this;t&&n.isFunction(t)&&this.queue.add(function(n){var r=this;setTimeout(function(){if(i.state===e){var s;s=i._scope?t&&t.call(i._scope,n):t&&t(n),s instanceof h?s.complete(function(t){r.next(t)}):r.next(s)}else r.next(n)},0)})},t.promise=function(t){return new h(t)},t.all=function(){var t=$.promise();if(arguments.length>0)for(var e=Array.prototype.slice.call(arguments),n=e.length,i=0;i<e.length;i++)e[i].complete(function(){this.isResolve&&(n-=1,0===n&&t.resolve())});return t},t.any=function(){var t=$.promise();if(arguments.length>0)for(var e=Array.prototype.slice.call(arguments),n=e.length,i=!1,r=0;r<e.length;r++)e[r].complete(function(){n-=1,this.isResolve&&(i=!0),0===n&&i&&t.resolve()});return t};var u=function(t){if(this.nodes=[],this.length=0,1===arguments.length&&n.isAvalid(t))if(n.isString(t))u.util.isHTML(t)?this.nodes=u.util.parseHTML(t):this.nodes=u.util.query(window.document,t),this.length=this.nodes.length;else if(t instanceof f)this.nodes=t.nodes,this.length=t.length;else{if(n.isWindow(t)||n.isDocument(t))return new g(t);1===t.nodeType?(this.nodes=[t],this.length=1):(this.nodes=[],this.length=0)}else 0===arguments.length&&(this.nodes=[],this.length=0)};u.regs={root:/^(?:body|html)$/i,_class:/^\.([\w-]+)$/,_id:/^#([\w-]*)$/,_tag:/^[\w-]+$/,_html:/^\s*<(\w+|!)[^>]*>/,_tagName:/<([\w:]+)/,_property:/-+(.)?/g},u.util={getDom:function(t){var e=new u;return 1===arguments.length?(e.nodes=t,e.length=t.length):(e.nodes=[],e.length=0),e},isClass:function(t){return u.regs._class.test(t)},isId:function(t){return u.regs._id.test(t)},isTag:function(t){return u.regs._tag.test(t)},isHTML:function(t){return u.regs._html.test(t)},query:function(t,e){var n=null;switch(!0){case this.isId(e):var i=document.getElementById(e.substring(1,e.length));n=i?[i]:[];break;case this.isClass(e):var r=t.getElementsByClassName(e.substring(1,e.length));n=Array.prototype.slice.call(r);break;case this.isTag(e):var r=t.getElementsByTagName(e);n=Array.prototype.slice.call(r);break;default:n=Array.prototype.slice.call(t.querySelectorAll(e))}return n},queryChild:function(t,e){var n=t.getAttribute("id")||"__bright__";t.setAttribute("id",n);var i=u.util.query(t,"#"+n+">"+e);return"__bright__"===n&&t.removeAttribute("id"),i},repairTags:{area:{l:1,s:"<map>",e:""},param:{l:1,s:"<object>",e:""},col:{l:2,s:"<table><tbody></tbody><colgroup>",e:"</table>"},legend:{l:1,s:"<fieldset>"},option:{l:1,s:"<select multiple='multiple'>",e:""},thead:{l:1,s:"<table>",e:"</table>"},tr:{l:2,s:"<table><tbody>",e:""},td:{l:3,s:"<table><tbody><tr>",e:""},_general:{s:"",e:"",l:0}},parseHTML:function(t){var e=t.match(u.regs._tagName),n=u.util.repairTags[e?e[1]:"_general"]||u.util.repairTags._general,i=document.createElement("DIV");i.innerHTML=n.s+t+n.e;for(var r=i,s=0;s<n.l;s++)r=r.firstChild;return Array.prototype.slice.call(r.childNodes)},parseFlagment:function(t){var e=u.util.parseHTML(t),n=window.document.createDocumentFragment();for(var i in e)n.appendChild(e[i]);return n},propertyName:function(t){return t.replace(u.regs._property,function(t,e,n){return 0===n?t.substring(1,2):e?e.toUpperCase():""})},cleanNode:function(t){if(t){if(t.datasets){for(var e in t.datasets){var n=t.datasets[e];n&&n.clean&&n.clean(),t.datasets[e]=null}t.datasets=null}m.util.unbindnode(t);var i=t.getElementsByClassName("incache");for(var r in i)if(i[r].nodeType){for(var s in i[r].datasets){var o=i[r].datasets[s];o&&o.clean&&o.clean(),i[r].datasets[s]=null}i[r].datasets=null,m.util.unbindnode(i[r])}}},supported:function(t){return 1===arguments.length?n.isString(t)||t instanceof u||n.isWindow(t)||n.isDocument(t)||1===t.nodeType:!1}};var c=function(t){this.dom=t,this.mapping={},c.init.call(this),this.dom.get(0).addEventListener(s.transitionEnd,c.fn,!1),this.dom.data("_transition_",this)};c.fn=function(t){var e=$(t.currentTarget).data("_transition_"),n=t.propertyName;e.mapping[n]?e.mapping[n].promise&&e.mapping[n].promise.resolve():e.mapping[s.prefix+n]?e.mapping[s.prefix+n].promise&&e.mapping[s.prefix+n].promise.resolve():e.mapping.all&&e.mapping.all.promise&&e.mapping.all.promise.resolve()},c.setCss=function(){var t="";for(var e in this.mapping)this.mapping[e]&&(t+=e+" "+this.mapping[e].time+"ms "+this.mapping[e].type+" "+this.mapping[e].delay+"ms,");t=t.length>0?t.substring(0,t.length-1):"none",this.dom.css(s.prefix+"transition",t)},c.init=function(){for(var t=this.dom.css("-all-transition-timing-function").split(","),e=this.dom.css("-all-transition-delay").split(","),n=this.dom.css("-all-transition-duration").split(","),i=this.dom.css("-all-transition-property").split(","),r=0;r<i.length;r++)"all"!==i[r]&&(this.mapping[i[r]]={property:i[r],time:1e3*parseFloat(n[r]),type:t[r],delay:1e3*parseFloat(e[r]),fn:null})},c.prototype.set=function(e,n){var i={time:200,type:"ease-out",delay:0},r=new h;r.scope(this.dom),t.extend(i,n);for(var o=s.fix(e.split(",")),a=0;a<o.length;a++){var l=o[a];if("all"===l){this.mapping={all:{property:l,time:i.time,type:i.type,delay:i.delay,promise:r}};break}this.mapping[l]={property:l,time:i.time,type:i.type,delay:i.delay,promise:r}}return c.setCss.call(this),r},c.prototype.all=function(e){var n={time:200,type:"ease-out",delay:0},i=new h;return i.scope(this.dom),t.extend(n,e),this.mapping={all:{property:"all",time:n.time,type:n.type,delay:n.delay,promise:i}},c.setCss.call(this),i},c.prototype.get=function(t){var e=this.mapping[s.fix(t)];return e?{type:e.type,time:e.time,delay:e.delay,property:t}:e},c.prototype.remove=function(t){for(var e=s.fix(t.split(",")),n=0;n<e.length;n++)this.mapping[e[n]]&&(this.mapping[e[n]]=null);return c.setCss.call(this),this},c.prototype.removeAll=function(){return this.mapping={},c.setCss.call(this),this},c.prototype.scope=function(){return this.dom},c.prototype.clean=function(){this.dom.get(0).removeEventListener(s.transitionEnd,c.fn,!1);for(var t in this)this[t]=null};var d=function(t){this.dom=t,this.attrs=[],this.setter=[],d.defaultValue.call(this),t.data("_transform_",this)};d.parse=function(){var t=this.dom.css(s.prefix+"transform"),e=t.match(/(-?[0-9\.]+)/g);if(e){e.length>6&&e.shift();for(var n=0;n<e.length;n++)e[n]=e[n]/1}else e=[1,0,0,1,0,0];return e},d.defaultValue=function(){var t={translate:[0,0],translate3d:[0,0,0],translateX:0,translateY:0,translateZ:0,rotate:0,rotateX:0,rotateY:0,rotateZ:0,rotate3d:[0,0,0,1],scale:[1,1],scaleX:1,scaleY:1,scaleZ:1,scale3d:[1,1,1],skew:[0,0],skewX:0,skewY:0},e=d.parse.call(this);if(e){if(1!==e[0]){var n=this.dom.get(0),i=n.style.webkitTransform||n.style.mozTransform||n.style.msTransform||n.style.transform;if(i||""===i){var r=document.styleSheets;n.matches=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector;for(var s=0;s<r.length;s++)for(var o=r[s].cssRules||r[s].rules,a=0;a<o.length;a++)n.matches(o[a].selectorText)&&(i=o[a].style.webkitTransform||o[a].style.mozTransform||o[a].style.msTransform||o[a].style.transform)}if(i&&""!==i){for(var l=[],p=[],h="",u="",c=!0,s=0;s<i.length;s++){var f=i[s];"("!==f&&")"!==f?c?h+=f:u+=f:"("===f?(l.push(h.trim()),h="",c=!1):")"===f&&(p.push(u.trim()),u="",c=!0)}for(var s=0;s<l.length;s++){var g="";if(-1!==p[s].indexOf(",")){for(var m=p[s].split(","),v=0;v<m.length;v++)m[v]=parseFloat(m[v]);g=m}else g=parseFloat(p[s]);t[l[s]]=g}}}6===e.length?(t.translate3d=[e[4],e[5],0],t.translateX=e[4],t.translateY=e[5]):(t.translate3d=[e[12],e[13],e[14]],t.translateX=e[12],t.translateY=e[13],t.translateZ=e[14])}this.values=t},d.watcher={translate:function(){return"translate3d("+(n.isNumber(this.values.translate3d[0])?this.values.translate3d[0]+"px":this.values.translate3d[0])+","+(n.isNumber(this.values.translate3d[1])?this.values.translate3d[1]+"px":this.values.translate3d[1])+","+(n.isNumber(this.values.translate3d[2])?this.values.translate3d[2]+"px":this.values.translate3d[2])+")"},rotate3d:function(){var t="0000"!==this.values.rotate3d.join("")?"rotate3d("+this.values.rotate3d[0]+","+this.values.rotate3d[1]+","+this.values.rotate3d[2]+","+this.values.rotate3d[3]+"deg)":"";return t+=0!==this.values.rotateX?" rotateX("+this.values.rotateX+"deg)":"",t+=0!==this.values.rotateY?" rotateY("+this.values.rotateY+"deg)":"",t+=0!==this.values.rotateZ?" rotateZ("+this.values.rotateZ+"deg)":""},scale3d:function(){var t="111"!==this.values.scale3d.join("")?"scale3d("+this.values.scale3d[0]+","+this.values.scale3d[1]+","+this.values.scale3d[2]+")":"";return t+=1!==this.values.scaleX?" scaleX("+this.values.scaleX+")":"",t+=1!==this.values.scaleY?" scaleY("+this.values.scaleY+")":"",t+=1!==this.values.scaleZ?" scaleZ("+this.values.scaleZ+")":""},scale:function(){return"11"!==this.values.scale.join("")?"scale("+this.values.scale[0]+","+this.values.scale[1]+")":""},skew:function(){return"00"!==this.values.skew.join("")?"skew("+this.values.skew[0]+"deg,"+this.values.skew[1]+"deg)":""},rotate:function(){return 0!==this.values.rotate?"rotate("+this.values.rotate+"deg)":""}},d.watch=function(t){-1===this.attrs.indexOf(t)&&d.watcher[t]&&(this.attrs.push(t),this.setter.push(d.watcher[t]))},d.watchName=function(t){return-1!==t.indexOf("translate")?"translate":-1!==t.indexOf("skew")?"skew":-1!==t.indexOf("rotate")?"rotate3d"===t?"rotate3d":"rotate":-1!==t.indexOf("scale")?"scale3d"===t?"scale3d":"rotate":""},d.set=function(){var t="";for(var e in this.setter)t+=this.setter[e].call(this)+" ";this.dom.css(s.prefix+"transform",t)},d.translate=function(t,e,n){if(2===arguments.length){var i=this.values.translate3d[t];return/^[-0-9\.]*$/.test(i)===!1&&d.defaultValue.call(this),this.values.translate3d[t]}return this.values.translate3d[t]=n,this.values.translate[t]=n,this.values[e]=n,d.set.call(this),this},d.sett=function(t,e,n){return 2===arguments.length?this.values[t]:((void 0===n||null===n)&&(n=e),this.values[t]=n,d.set.call(this),this)},d.prototype.matrix=function(){return d.parse.call(this)},d.prototype.sets=function(t){for(var e in t)void 0!==this.values[e]&&(this.values[e]=t[e],d.watch.call(this,d.watchName(e)));return d.set.call(this),this},d.prototype.scale=function(t,e){return d.watch.call(this,"scale"),0===arguments.length?this.values.scale:((void 0===t||null===t)&&(t=1),(void 0===e||null===e)&&(e=1),this.values.scale[0]=t,this.values.scale[1]=e,d.set.call(this),this)},d.prototype.rotate=function(t){return d.watch.call(this,"rotate"),0===arguments.length?this.values.rotate:((void 0===t||null===t)&&(t=0),this.values.rotate=t,d.set.call(this),this)},d.prototype.scale3d=function(t,e,n){return d.watch.call(this,"scale3d"),0===arguments.length?this.values.scale3d:((void 0===t||null===t)&&(t=1),(void 0===e||null===e)&&(e=1),(void 0===n||null===n)&&(n=1),this.values.scale3d[0]=t,this.values.scale3d[1]=e,this.values.scale3d[2]=n,d.set.call(this),this)},d.prototype.rotate3d=function(t,e,n,i){return d.watch.call(this,"rotate3d"),0===arguments.length?this.values.rotate3d:((void 0===t||null===t)&&(t=0),(void 0===e||null===e)&&(e=0),(void 0===n||null===n)&&(n=0),(void 0===i||null===i)&&(i=0),this.values.rotate3d[0]=t,this.values.rotate3d[1]=e,this.values.rotate3d[2]=n,this.values.rotate3d[3]=i,d.set.call(this),this)},d.prototype.skew=function(t,e){return d.watch.call(this,"skew"),0===arguments.length?this.values.skew:((void 0===t||null===t)&&(t=1),(void 0===e||null===e)&&(e=1),this.values.skew[0]=t,this.values.skew[1]=e,d.set.call(this),this)},d.prototype.x=function(t){return d.watch.call(this,"translate"),d.translate.apply(this,0===arguments.length?[0,"translateX"]:[0,"translateX",t])},d.prototype.y=function(t){return d.watch.call(this,"translate"),d.translate.apply(this,0===arguments.length?[1,"translateY"]:[1,"translateY",t])},d.prototype.z=function(t){return d.watch.call(this,"translate"),d.translate.apply(this,0===arguments.length?[2,"translateZ"]:[2,"translateZ",t])},d.prototype.scaleX=function(t){return d.watch.call(this,"scale"),d.sett.apply(this,0===arguments.length?["scaleX",1,t]:["scaleX",1,t])},d.prototype.scaleY=function(t){return d.watch.call(this,"scale"),d.sett.apply(this,0===arguments.length?["scaleY",1,t]:["scaleY",1,t])},d.prototype.scaleZ=function(t){return d.watch.call(this,"scale"),d.sett.apply(this,0===arguments.length?["scaleZ",1,t]:["scaleZ",1,t])},d.prototype.rotateX=function(t){return d.watch.call(this,"rotate"),d.sett.apply(this,0===arguments.length?["rotateX",0,t]:["rotateX",0,t])},d.prototype.rotateY=function(t){return d.watch.call(this,"rotate"),d.sett.apply(this,0===arguments.length?["rotateY",0,t]:["rotateY",0,t])},d.prototype.rotateZ=function(t){return d.watch.call(this,"rotate"),d.sett.apply(this,0===arguments.length?["rotateZ",0,t]:["rotateZ",0,t])},d.prototype.skewX=function(t){return d.watch.call(this,"skew"),d.sett.apply(this,0===arguments.length?["skewX",0,t]:["skewX",0,t])},d.prototype.skewY=function(t){return d.watch.call(this,"skew"),d.sett.apply(this,0===arguments.length?["skewY",0,t]:["skewY",0,t])},d.prototype.origin=function(t,e){if(0===arguments.length){var t=this.dom.css(s.prefix+"transform-origin").split(" ");return{x:t[0],y:t[1]}}return 2===arguments.length?this.dom.css(s.prefix+"transform-origin",t+" "+e):void 0},d.prototype.style=function(t){return 0===arguments.length?this.dom.css(s.prefix+"transform-style"):(this.dom.css(s.prefix+"transform-style",t),this)},d.prototype.perspective=function(t){return 0===arguments.length?this.dom.css(s.prefix+"perspective"):(this.dom.css(s.prefix+"perspective",t),this)},d.prototype.perspectiveOrigin=function(){if(0===arguments.length){var t=this.dom.css(s.prefix+"perspective-origin").split(" ");return{x:t[0],y:t[1]}}return 2===arguments.length?this.dom.css(s.prefix+"perspective-origin",t+" "+b):void 0},d.prototype.backface=function(){return 0===arguments.length?this.dom.css(s.prefix+"backface-visibility"):(this.dom.css(s.prefix+"backface-visibility",a),this)},d.prototype.clean=function(){for(var t in this)this[t]=null},d.prototype.scope=function(){return this.dom};var f=function(){};f.prototype.get=function(t){return t/=1,n.isAvalid(t)&&t>=0&&t<this.nodes.length?this.nodes[t]:null},f.prototype.ready=function(t){var e=/complete|loaded|interactive/;return e.test(window.document.readyState)?t&&t():window.document.addEventListener("DOMContentLoaded",function(){t&&t()},!1),this},f.prototype.find=function(t){var e=[];return this.isEmpty()||n.isString(t)&&(e=u.util.query(this.nodes[0],t)),u.util.getDom(e)},f.prototype.children=function(t){var e=[];return this.isEmpty()||(e=n.isString(t)?u.util.queryChild(this.nodes[0],t):1===arguments.length&&t>=0?this.nodes[0].children[t]?[this.nodes[0].children[t]]:[]:Array.prototype.slice.call(this.nodes[0].children)),u.util.getDom(e)},f.prototype.siblings=function(t){var e=[];if(!this.isEmpty()){var i=[];i=n.isString(t)&&this.nodes[0].parentNode?u.util.queryChild(this.nodes[0].parentNode,t):this.nodes[0].parentNode?Array.prototype.slice.call(this.nodes[0].parentNode.children):[];for(var r=0;r<i.length;r++)i[r]!==this.nodes[0]&&e.push(i[r])}return u.util.getDom(e)},f.prototype.has=function(t){for(var e=[],n=0;n<this.nodes.length;n++){var i=u.util.queryChild(this.nodes[n],t);i.length>0&&e.push(this.nodes[n])}return u.util.getDom(e)},f.prototype.index=function(){var t=-1;if(!this.isEmpty())for(var e=this.nodes[0].parentNode,n=0;n<e.children.length;n++)if(e.children[n]===this.nodes[0]){t=n;break}return t},f.prototype.filter=function(t){var e=[];if(!this.isEmpty()){var n=u.util.query(window.document,t);if(n.length>0)for(var i=0;i<this.nodes.length;i++)-1!==n.indexOf(this.nodes[i])&&e.push(this.nodes[i])}return u.util.getDom(e)},f.prototype.first=function(){var t=[];return this.isEmpty()||t.push(this.get(0)),u.util.getDom(t)},f.prototype.last=function(){var t=[];return this.nodes.length>0&&t.push(this.get(this.length-1)),u.util.getDom(t)},f.prototype.parent=function(){var t=arguments[0],e=[];if(!this.isEmpty())if(n.isString(t))for(var i=u.util.query(window.document,t),r=this.nodes[0].parentNode;r&&!n.isDocument(r);)-1!==i.indexOf(r)&&e.push(r),r=r.parentNode;else if(n.isNumber(t)&&t>0){for(var r=this.nodes[0].parentNode,s=t-1;r&&!n.isDocument(r)&&s>0;)s--,r=r.parentNode;e.push(r)}else this.nodes[0].parentNode&&e.push(this.nodes[0].parentNode);return u.util.getDom(e)},f.prototype.parents=function(){var t=arguments[0],e=[];if(!this.isEmpty()){for(var i=this.nodes[0].parentNode;i&&!n.isDocument(i);)e.push(i),i=i.parentNode;if(n.isString(t)){var r=u.util.query(window.document,t);e=e.filter(function(t){return-1!==r.indexOf(t)?!0:void 0})}}return u.util.getDom(e)},f.prototype.next=function(){var t=[];if(!this.isEmpty()){var e=this.nodes[0].nextSibling;e&&t.push(e)}return u.util.getDom(t)},f.prototype.nexts=function(t){var e=[],i=this;if(!this.isEmpty()){for(var r=this.nodes[0].nextSibling;r;)1===r.nodeType&&e.push(r),r=r.nextSibling;if(n.isString(t)&&this.nodes[0].parentNode){var s=u.util.queryChild(this.nodes[0].parentNode,t);e=e.filter(function(t){return-1!==s.indexOf(t)&&t!==i.nodes[0]?!0:void 0})}}return u.util.getDom(e)},f.prototype.prev=function(){var t=[];if(!this.isEmpty()){var e=this.nodes[0].previousSibling;e&&t.push(e)}return u.util.getDom(t)},f.prototype.prevs=function(t){var e=[],i=this;if(!this.isEmpty()){for(var r=this.nodes[0].previousSibling;r;)1===r.nodeType&&e.push(r),r=r.previousSibling;if(n.isString(t)&&this.nodes[0].parentNode){var s=u.util.queryChild(this.nodes[0].parentNode,t);e=e.filter(function(t){return-1!==s.indexOf(t)&&t!==i.nodes[0]?!0:void 0})}}return u.util.getDom(e)},f.prototype.eq=function(t){var e=[];return t>=0&&t<this.nodes.length&&e.push(this.nodes[t]),u.util.getDom(e)},f.prototype.each=function(t){if(t)for(var e=0;e<this.nodes.length&&t.call(this.nodes[e],this.nodes[e],e,this.nodes)!==!1;e++);return this},f.prototype.remove=function(){var t=arguments[0];if(t&&n.isNumber(t)&&t<this.nodes.length){var e=this.nodes[t];e&&(u.util.cleanNode(e),e.parentNode.removeChild(e))}else if(n.isString(t))for(var i=u.util.query(window.document,t),r=0;r<this.nodes.length;r++)i.indexOf(-1!==this.nodes[r])&&this.nodes[r].parentNode&&this.nodes[r].parentNode.removeChild(this.nodes[r]);else for(var r=0;r<this.nodes.length;r++){var e=this.nodes[r];e&&(u.util.cleanNode(e),e.parentNode&&e.parentNode.removeChild(e))}return this},f.prototype.empty=function(){for(var t=0;t<this.nodes.length;t++){for(var e=this.nodes[t].children,n=0;n<e.length;n++)e[n].nodeType&&u.util.cleanNode(e[n]);this.nodes[t].innerHTML=""}},f.prototype.clean=function(){for(var t=0;t<=this.nodes.length;t++)u.util.cleanNode(this.nodes[t]);this.nodes=null,this.length=0},f.prototype.clone=function(){var t=[];return this.isEmpty()||t.push(this.nodes[0].cloneNode(!0)),u.util.getDom(t)},f.prototype.wrap=function(t){for(var e=0;e<this.nodes.length;e++){
var i=null;if(n.isString(t))i=u.util.parseHTML(t)[0]||null;else if(t instanceof f)i=u.nodes[0];else if(t.nodeType)i=t;else if(n.isFunction(t)){var r=t();n.isString(r)&&(i=u.util.parseHTML(t)[0]||null)}if(i){var s=this.nodes[e];s.parentNode&&(s.parentNode.replaceChild(i,s),i.appendChild(s))}}return this},f.prototype.append=function(){var t=arguments[0];if(!this.isEmpty())if(n.isString(t))for(var e=u.util.parseFlagment(t),i=0;i<this.nodes.length;i++)this.nodes[i].appendChild(e.cloneNode(!0));else if(t instanceof f)for(var i=0;i<this.nodes.length;i++)this.nodes[i].appendChild(t.nodes[0]);else if(t&&t.nodeType)for(var i=0;i<this.nodes.length;i++)this.nodes[i].appendChild(t);else if(n.isFunction(t))for(var i=0;i<this.nodes.length;i++){var r=t.call(this.nodes[i],i,this.nodes[i].innerHTML);u.util.isHTML(r)&&this.nodes[i].appendChild(u.util.parseFlagment(r))}return this},f.prototype.appendTo=function(t){if(!this.isEmpty())if(n.isString(t)){var e=u.util.query(window.document,t);e.length>0&&e[0].appendChild(this.nodes[0])}else t instanceof f?t.length>0&&t.nodes[0].appendChild(this.nodes[0]):t.appendChild(this.nodes[0]);return this},f.prototype.insertBefore=function(t){if(!this.isEmpty())if(n.isString(t)){var e=u.util.query(window.document,t)[0];e&&e.parentNode&&e.parentNode.insertBefore(this.nodes[0],e)}else t instanceof f?!t.isEmpty()&&t.parent().get(0).insertBefore(this.nodes[0],t.get(0)):t.parentNode&&t.parentNode.insertBefore(this.nodes[0],t);return this},f.prototype.insertAfter=function(t){if(!this.isEmpty()){var e=null;if(n.isString(t))var e=u.util.query(window.document,t)[0]||null;else t instanceof f?e=t.nodes[0]||null:t.nodeType&&(e=t);e&&(e.nextSibling?e.parentNode.insertBefore(this.nodes[0],e.nextSibling):e.parentNode.appendChild(this.nodes[0]))}return this},f.prototype.prepend=function(){var t=arguments[0];if(!this.isEmpty())if(n.isString(t))for(var e=u.util.parseFlagment(t),i=0;i<this.nodes.length;i++)0!==this.nodes[i].childNodes.length?this.nodes[i].insertBefore(e.cloneNode(!0),this.nodes[i].firstChild):this.nodes[i].appendChild(e.cloneNode(!0));else if(n.isFunction(t))for(var i=0;i<this.nodes.length;i++){var r=t.call(this.nodes[i],i,this.nodes[i].innerHTML);u.util.isHTML(r)&&(this.nodes[i].childNodes.length>0?this.nodes[i].insertBefore(u.util.parseFlagment(r),this.nodes[i].firstChild):this.nodes[i].appendChild(u.util.parseFlagment(r)))}return this},f.prototype.prependTo=function(t){if(!this.isEmpty())if(n.isString(t)){var e=u.util.query(window.document,t);e.length>0&&(e[0].childNodes.length>0?e[0].insertBefore(this.nodes[0],e[0].firstChild):e[0].appendChild(this.nodes[0]))}else t instanceof f?t.isEmpty()||(t.nodes[0].childNodes.length>0?t.nodes[0].insertBefore(this.nodes[0],t.nodes[0].firstChild):t.nodes[0].appendChild(this.nodes[0])):1===t.nodeType&&(t.children.length>0?t.insertBefore(this.nodes[0],t.firstChild):t.appendChild(this.nodes[0]));return this},f.prototype.before=function(t){if(!this.isEmpty()&&this.nodes[0].parentNode)if(n.isString(t)){var e=u.util.parseFlagment(t);this.nodes[0].parentNode&&this.nodes[0].parentNode.insertBefore(e,this.nodes[0])}else t instanceof u?this.nodes[0].parentNode&&this.nodes[0].parentNode.insertBefore(t.nodes[0],this.nodes[0]):t.nodeType&&this.nodes[0].parentNode&&this.nodes[0].parentNode.insertBefore(t,this.nodes[0]);return this},f.prototype.after=function(t){if(!this.isEmpty()){var e=null;n.isString(t)?e=u.util.parseFlagment(t):t instanceof f?e=t.get(0):t.nodeType&&(e=t),this.nodes[0].nextSibling?this.nodes[0].parentNode&&this.nodes[0].parentNode.insertBefore(e,this.nodes[0].nextSibling):this.nodes[0].parentNode&&this.nodes[0].parentNode.appendChild(e)}return this},f.prototype.replaceWith=function(t){if(!this.isEmpty()){var e=null;n.isString(t)?e=u.util.query(window.document,t)[0]:t instanceof f?e=t.nodes[0]:t.nodeType&&(e=t),e&&e.parentNode.replaceChild(this.nodes[0],e)}return this},f.prototype.equal=function(t){return this===t},f.prototype.same=function(e){var n=!0;if(e=t(e),this.length===e.length){for(var i=0;i<this.nodes.length;i++)if(-1===e.nodes.indexOf(this.nodes[i])){n=!1;break}}else n=!1;return n},f.prototype.css=function(t,e){var i=this;if(!this.isEmpty())if(1===arguments.length&&n.isObject(t)){t=s.fix(t);for(var r=0;r<this.nodes.length;r++){var o=this.nodes[r].style.cssText+";";for(var a in t)o+=a+":"+t[a]+";";this.nodes[r].style.cssText=o}}else if(1===arguments.length&&n.isString(t))t=s.fix(t),i=window.getComputedStyle(this.nodes[0],"").getPropertyValue(t);else if(2===arguments.length)for(var r=0;r<this.nodes.length;r++){var l=s.fix(t);this.nodes[r].style[u.util.propertyName(l)]=e}return i},f.prototype.attr=function(t,e){var i=this;if(!this.isEmpty())if(2===arguments.length){if(""!==t)for(var r=0;r<this.nodes.length;r++)this.nodes[r].setAttribute(t,e)}else if(1===arguments.length)if(n.isObject(t))for(var s=0;s<this.nodes.length;s++)for(var r in t)""!==r&&this.nodes[s].setAttribute(r,t[r]);else t&&(i=this.nodes[0].getAttribute(t));return i},f.prototype.removeAttr=function(t){for(var e=0;e<this.nodes.length;e++)this.nodes[e].removeAttribute(t);return this},f.prototype.data=function(e,i){var r=null;if(!this.isEmpty())if(1===arguments.length)this.nodes[0].datasets||(this.nodes[0].datasets={}),n.isString(e)?void 0!==this.nodes[0].datasets[e]&&null!==this.nodes[0].datasets[e]&&(r=this.nodes[0].datasets[e]):n.isObject(e)&&t.extend(this.nodes[0].datasets,e);else if(2===arguments.length){this.addClass("incache");for(var s=0;s<this.nodes.length;s++)this.nodes[s].datasets||(this.nodes[s].datasets={}),this.nodes[s].datasets[e]=i;r=this}return r},f.prototype.removeData=function(t){return this.isEmpty()||1===arguments.length&&this.data(t,null),this},f.prototype.dataset=function(t,e){var i=this;if(this.nodes.length>0)if(1===arguments.length){if(n.isString(t))i=this.nodes[0].dataset?this.nodes[0].dataset[t]:this.nodes[0].getAttribute(o.getDatasetName(t));else if(n.isObject(t))for(var r in t)this.nodes[0].dataset?this.nodes[0].dataset[r]=t[r]:this.nodes[0].setAttribute(o.getDatasetName(r),t[r])}else if(2===arguments.length)for(var r=0;r<this.nodes.length;r++)this.nodes[0].dataset?this.nodes[r].dataset[t]=e:this.nodes[0].setAttribute(o.getDatasetName(t),e);else if(0===arguments.length)if(this.nodes[0].dataset)i=this.nodes[0].dataset;else{var s=this.nodes[0].attrbutes;i={};for(var r=0;r<s.length;s++)0===s[r].nodeName.indexOf("data-")&&(i[o.getDatasetReserve(s[r].nodeName)]=s[r].nodeValue)}return i},f.prototype.create=function(t,e){return t?e?this.nodes=[window.document.createElementNS(e,t)]:this.nodes=[window.document.createElement(t)]:this.nodes=[window.document.createDocumentFragment()],this.length=this.nodes.length,this},f.prototype.element=function(t,e){return t?e?this.nodes=[window.document.createElementNS(e,t)]:this.nodes=[window.document.createElement(t)]:this.nodes=[window.document.createDocumentFragment()],this.length=this.nodes.length,this},f.prototype.width=function(t){return 1===arguments.length?(n.isNumber(t)&&(t+="px"),this.css("width",t),this):this.nodes[0].offsetWidth},f.prototype.height=function(t){return 1===arguments.length?(n.isNumber(t)&&(t+="px"),this.css("height",t),this):this.nodes[0].offsetHeight},f.prototype.offset=function(){if(this.isEmpty())return null;var t=this.nodes[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:t.width,height:t.height}},f.prototype.hide=function(){for(var t=0;t<this.nodes.length;t++){var e=window.getComputedStyle(this.nodes[t],"").getPropertyValue("display");"none"!==e&&(this.nodes[t].setAttribute("ds",e),this.nodes[t].style.display="none")}return this},f.prototype.show=function(){for(var t=0;t<this.nodes.length;t++){var e=window.getComputedStyle(this.nodes[t],"").getPropertyValue("display");if("none"===e){var n=this.nodes[t].getAttribute("ds");n?(this.nodes[t].removeAttribute("ds"),this.nodes[t].style.display=n):this.nodes[t].style.display="block"}}return this},f.prototype.visible=function(t){for(var e=0;e<this.nodes.length;e++)t?this.nodes[e].style.visibility="visible":this.nodes[e].style.visibility="hidden";return this},f.prototype.html=function(t){var e=this;if(!this.isEmpty())if(1===arguments.length)for(var n=0;n<this.nodes.length;n++)this.nodes[n].innerHTML=t;else e=this.nodes[0].innerHTML;return e},f.prototype.outer=function(){return this.isEmpty()?"":this.nodes[0].outerHTML},f.prototype.text=function(t){var e=this;if(!this.isEmpty())if(1===arguments.length)for(var n=0;n<this.nodes.length;n++)this.nodes[n].innerText=t;else e=this.nodes[0].innerText;return e},f.prototype.val=function(t){var e=this;if(!this.isEmpty())if(1===arguments.length)for(var n=0;n<this.nodes.length;n++)this.nodes[n].value=t;else e=this.nodes[0].value;return e},f.prototype.addClass=function(t){for(var e=0;e<this.nodes.length;e++)this.nodes[e].classList?this.nodes[e].classList.add(t):-1===this.nodes[e].className.indexOf(t)&&(this.nodes[e].className=this.nodes[e].className+" "+t);return this},f.prototype.removeClass=function(t){for(var e=0;e<this.nodes.length;e++)if(this.nodes[e].classList)this.nodes[e].classList.remove(t);else if(-1!==this.nodes[e].className.indexOf(t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");this.nodes[e].className=this.nodes[e].className.replace(n," ")}return this},f.prototype.contains=function(e){if(!this.isEmpty()){var n=t(e);if(!n.isEmpty())return this.nodes[0].contains(n.nodes[0])}return!1},f.prototype.contain=function(t){return this.same(t)||this.contains(t)},f.prototype.hasClass=function(t){var e=!1;return this.isEmpty()||(e=this.nodes[0].classList?this.nodes[0].classList.contains(t):-1===this.nodes[0].className.indexOf(t)),e},f.prototype.toggleClass=function(t){if(!this.isEmpty())if(this.nodes[0].classList)this.nodes[0].classList.toggle(t);else if(-1!==this.nodes[0].className.indexOf(t))for(var e=new RegExp("(\\s|^)"+t+"(\\s|$)"),n=0;n<this.nodes.length;n++)this.nodes[n].className=this.nodes[n].className.replace(e," ");else for(var n=0;n<this.nodes.length;n++)this.nodes[n].className=this.nodes[n].className+" "+t;return this},f.prototype.scrollTop=function(t){var e=this;if(0===arguments.length)e=this.isEmpty()?null:void 0!==this.nodes[0].scrollTop?this.nodes[0].scrollTop:this.nodes[0].scrollY;else for(var n=0;n<this.nodes.length;n++)void 0!==this.nodes[n].scrollTop?this.nodes[n].scrollTop=t:this.nodes[n].scrollY=t;return e},f.prototype.scrollLeft=function(t){var e=this;if(0===arguments.length)e=this.isEmpty()?null:void 0!==this.nodes[0].scrollLeft?this.nodes[0].scrollLeft:this.nodes[0].scrollX;else for(var n=0;n<this.nodes.length;n++)void 0!==this.nodes[n].scrollLeft?this.nodes[n].scrollLeft=t:this.nodes[n].scrollX=t;return e},f.prototype.click=function(t){return 1===arguments.length?this.bind("click",t):this.trigger("click"),this},f.prototype.load=function(t){return 1===arguments.length?this.bind("load",t):this.trigger("load"),this},f.prototype.trigger=function(t,e){return m.util.trigger(this,t,e)},f.prototype.bind=function(t,e){if(n.isString(t))return m.util.bind(this,t,e);if(n.isArray(t)){for(var i=0;i<t.length;i++)m.util.bind(this,t[i],e);return this}},f.prototype.unbind=function(t,e){return m.util.unbind(this,t,e)},f.prototype.isEmpty=function(t){return 0===arguments.length?0===this.nodes.length:n.isFunction(t)?(t.call(this,0===this.nodes.length),this):this},f.prototype.isWrapper=function(){return this instanceof f},f.prototype.add=function(e){var n=t(e);return this.nodes=this.nodes.concat(n.nodes),this.length=this.nodes.length,this},f.prototype.prop=function(t,e){for(var i=0;i<this.nodes.length;i++){var r=this.nodes[i][t];void 0!==r&&(n.isFunction(e)?this.nodes[i][t]=e.call(this.nodes[i],i,r):this.nodes[i][t]=e)}return this},f.prototype.position=function(t,e){if(0===arguments.length){var t=this.offsetParent();return t.length>0&&!n.isDocument(t.get(0))?{left:this.css("left"),top:this.css("top")}:this.offset()}return t&&this.css("left",t),e&&this.css("top",e),this},f.prototype.offsetParent=function(){var t=[];if(!this.isEmpty())if(void 0===this.nodes[0].offsetParent){for(var e=this.nodes[0].parentNode;e&&!u.regs.root.test(e.nodeName)&&"static"===window.getComputedStyle(e,"").getPropertyValue("position");)e=e.parentNode;t.push(e)}else t.push(this.nodes[0].offsetParent);return u.util.getDom(t)},f.prototype.scrollingLeft=function(e,n,i){var r=t.promise().scope(this),s=this;return this.scrollLeft()!==e?new y({from:this.scrollLeft(),to:e,during:n,fn:i,onrunning:function(t){s.scrollLeft(t)},onend:function(){r.resolve()}}).start():r.resolve(),r},f.prototype.scrollingTop=function(e,n,i){var r=t.promise().scope(this),s=this;return this.scrollTop()!==e?new y({from:this.scrollTop(),to:e,during:n,fn:i,onrunning:function(t){s.scrollTop(t)},onend:function(){r.resolve()}}).start():r.resolve(),r},f.prototype.transition=function(){var t=this.data("_transition_");return t||(t=new c(this)),t},f.prototype.animate=function(e,n){var i=this,r=this.data("_animate_"),o={duration:350,delay:0,type:"ease-out"};t.extend(o,n),e=s.fix(e);var a="";for(var l in e)a+=l+" "+o.duration+"ms "+o.type+" "+o.delay+"ms,";if(a.length>0&&(a=a.substring(0,a.length-1)),r)r.then(function(){var n=t.promise().scope(i),r=function(t){i.get(0).removeEventListener(s.transitionEnd,r,!1),n.resolve(t)};return i.css(s.prefix+"transition",a).get(0).addEventListener(s.transitionEnd,r,!1),i.css(e),n});else{var p=t.promise().scope(i),h=function(t){i.get(0).removeEventListener(s.transitionEnd,h,!1),p.resolve(t)};i.css(s.prefix+"transition",a).get(0).addEventListener(s.transitionEnd,h,!1),i.css(e),i.data("_animate_",p),r=p}return r},f.prototype.transform=function(){var t=this.data("_transform_");return t||(t=new d(this)),t},f.prototype.isRemoved=function(){return this.nodes[0]?!window.document.contains(this.nodes[0]):!1},f.prototype.mutationObserve=function(t,e){if(!this.isEmpty()&&!this.nodes[0].datasets["-mutation-"]){var n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,i=new n(t);i.observe(this.nodes[0],e),this.nodes[0].datasets["-mutation-"]=i}return this},f.prototype.unMutationObserve=function(){return this.isEmpty()||this.nodes[0].datasets["-mutation-"]&&(this.nodes[0].datasets["-mutation-"].disconnect(),this.nodes[0].datasets["-mutation-"].takeRecord(),this.nodes[0].datasets["-mutation-"]=null),this},f.prototype.finder=function(){return this.isEmpty()?null:this.nodes[0].datasets&&this.nodes[0].datasets["-finder-"]?this.nodes[0].datasets["-finder-"]:null},f.prototype.group=function(){return this.isEmpty()?null:this.nodes[0].datasets&&this.nodes[0].datasets["-groupitem-"]?this.nodes[0].datasets["-groupitem-"].group||null:null},f.prototype.items=function(t){var e=new u;if(!this.isEmpty()&&this.nodes[0].datasets["-group-"]&&this.nodes[0].datasets["-group-"].items)if(1===arguments.length)this.nodes[0].datasets["-group-"].items[t]&&e.add(this.nodes[0].datasets["-group-"].items[t]);else for(var n in this.nodes[0].datasets["-group-"].items)e.add(this.nodes[0].datasets["-group-"].items[n]);return e},f.prototype.item=function(){return this.isEmpty()?null:this.nodes[0].datasets&&this.nodes[0].datasets["-groupitem-"]?this.nodes[0].datasets["-groupitem-"]||null:null},f.prototype.cache=function(){return this.isEmpty()?null:0===arguments.length?this.nodes[0].datasets["-cache-"]||null:((void 0===this.nodes[0].datasets||null===this.nodes[0].datasets)&&(this.nodes[0].datasets={},this.addClass("incache")),this.nodes[0].datasets["-cache-"]=arguments[0],this)},f.prototype.getModule=function(){return this.data("-view-")},f.prototype.predefined=function(t){var e=Array.prototype.slice.call(arguments),n=f.prototype[e[0]];return n?(e.splice(0,1),n.call(this,e)):this},u.prototype=new f;var g=function(t){this.obj=t};g.prototype.width=function(){return window.innerWidth},g.prototype.height=function(){return window.innerHeight},g.prototype.bind=function(t,e){return n.isWindow(this.obj)?window.addEventListener(t,e,!1):(this.nodes=[this.obj],m.util.bind(this,t,e)),this},g.prototype.unbind=function(t,e){return n.isWindow(this.obj)?window.removeEventListener(t,e,!1):(this.nodes=[this.obj],m.util.bind(this,t,e)),this},g.prototype.scrollTop=function(t){var e=this;return 0===arguments.length?e=document.body.scrollTop||document.documentElement.scrollTop:(document.body.scrollTop=t,document.documentElement.scrollTop=t),e},g.prototype.scrollLeft=function(t){var e=this;return 0===arguments.length?e=document.body.scrollLeft||document.documentElement.scrollLeft:document.body.scrollLeft=t,e},g.prototype.scrollingLeft=function(e,n,i){var r=t.promise().scope(this),s=this;return this.scrollLeft()!==e?new y({from:this.scrollLeft(),to:e,during:n,fn:i,onrunning:function(t){s.scrollLeft(t)},onend:function(){r.resolve()}}).start():r.resolve(),r},g.prototype.scrollingTop=function(e,n,i){var r=t.promise().scope(this),s=this;return this.scrollTop()!==e?new y({from:this.scrollTop(),to:e,during:n,fn:i,onrunning:function(t){s.scrollTop(t)},onend:function(){r.resolve()}}).start():r.resolve(),r};var m=function(t){this.currentTarget=null,this.target=null,this.timeStamp=(new Date).getTime(),this.type="",this.cancelable=!1,this._stop=!1,this.data=t};m.prototype.stopPropagation=function(){this._stop=!0},m.prototype.preventDefault=function(){this.cancelable=!0},m.trigger=function(t){var e=t.currentTarget.events[t.type];for(var n in e)e[n].call(t.currentTarget,t)},m.util={types:{HTMLEvents:"load,unload,abort,error,select,change,submit,reset,focus,blur,resize,scroll",MouseEvent:"click,mousedown,mouseup,mouseover,mousemove,mouseout",UIEvent:"DOMFocusIn,DOMFocusOut,DOMActivate",MutationEvent:"DOMSubtreeModified,DOMNodeInserted,DOMNodeRemoved,DOMNodeRemovedFromDocument,DOMNodeInsertedIntoDocument,DOMAttrModified,DOMCharacterDataModified"},isEvent:function(t){var e={type:t,interfaceName:null};for(var n in m.util.types)if(-1!==m.util.types[n].indexOf(t)){e.interfaceName=n;break}return e},bind:function(t,e,n){for(var i=0;i<t.nodes.length;i++)t.nodes[i].events||(t.nodes[i].events={}),t.nodes[i].events[e]?t.nodes[i].events[e].push(n):(t.nodes[i].events[e]=[],t.nodes[i].events[e].push(n)),t.nodes[i].addEventListener(e,m.trigger,!1);return t},unbind:function(t,e,i){for(var r=0;r<t.nodes.length;r++){var s=t.nodes[r];if(s.events)if(e&&""!==e){var o=s.events[e];if(o)if(s.removeEventListener(e,m.trigger,!1),n.isFunction(i))for(var r in o)o[r]===i&&o.splice(r,1);else o.length=0}else{var a=s.events;for(var r in a)s.removeEventListener(r,m.trigger,!1),a[r].length=0}}return t},unbindAll:function(t){for(var e=t.nodes,n=0;n<e.length;n++){var i=e[n].events;for(var r in i)e[n].removeEventListener(r,m.trigger,!1),i[r].length=0}return t},unbindnode:function(t){var e=t.events;for(var n in e)t.removeEventListener(n,m.trigger,!1),e[n].length=0},trigger:function(t,e,n){var i=this.isEvent(e);if(i.interfaceName){var r=document.createEvent(i.interfaceName);switch(i.interfaceName){case"MouseEvent":r.initMouseEvent(e,!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null);break;case"HTMLEvents":r.initEvent(e,!0,!1,window);break;case"UIEvents":r.initUIEvents(e,!0,!1,window,null);break;case"MutationEvent ":r.initMutationEvent(e,!0,!1,window,null,null,null,null)}for(var s=0;s<t.nodes.length;s++)t.nodes[s].dispatchEvent(r)}else{var o=new m(n);o.type=e,o.target=t.nodes[0];for(var a=t.nodes[0];a;){if(o.currentTarget=a,a.events&&a.events[e]){var l=a.events[e];for(var s in l)l[s].call(a,o)}if(o._stop)break;a=a.parentNode}}return t}};var v={linner:function(t,e,n,i){return n*t/i+e},"ease-in-quad":function(t,e,n,i){return n*(t/=i)*t+e},"ease-out-quad":function(t,e,n,i){return-n*(t/=i)*(t-2)+e},"ease-in-out-quad":function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},"ease-in-cubic":function(t,e,n,i){return n*(t/=i)*t*t+e},"ease-out-cubic":function(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e},"ease-in-out-cubic":function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},"ease-in-quart":function(t,e,n,i){return n*(t/=i)*t*t*t+e},"ease-out-quart":function(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e},"ease-in-out-quart":function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e},"ease-in-quint":function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},"ease-out-quint":function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},"ease-in-out-quint":function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},"ease-in-sine":function(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e},"ease-out-sine":function(t,e,n,i){return n*Math.sin(t/i*(Math.PI/2))+e},"ease-in-out-sine":function(t,e,n,i){return-n/2*(Math.cos(Math.PI*t/i)-1)+e},"ease-in-expo":function(t,e,n,i){return 0===t?e:n*Math.pow(2,10*(t/i-1))+e},"ease-out-expo":function(t,e,n,i){return t===i?e+n:n*(-Math.pow(2,-10*t/i)+1)+e},"ease-in-out-expo":function(t,e,n,i){return 0===t?e:t===i?e+n:(t/=i/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(-Math.pow(2,-10*--t)+2)+e},"ease-in-circ":function(t,e,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+e},"ease-out-circ":function(t,e,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+e},"ease-in-out-circ":function(t,e,n,i){return(t/=i/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e},"ease-in-elastic":function(t,e,n,i,r,s){var o;return 0===t?e:1==(t/=i)?e+n:("undefined"==typeof s&&(s=.3*i),!r||r<Math.abs(n)?(o=s/4,r=n):o=s/(2*Math.PI)*Math.asin(n/r),-(r*Math.pow(2,10*(t-=1))*Math.sin((t*i-o)*(2*Math.PI)/s))+e)},"ease-out-elastic":function(t,e,n,i,r,s){var o;return 0===t?e:1===(t/=i)?e+n:("undefined"==typeof s&&(s=.3*i),!r||r<Math.abs(n)?(r=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/r),r*Math.pow(2,-10*t)*Math.sin((t*i-o)*(2*Math.PI)/s)+n+e)},"ease-in-out-elastic":function(t,e,n,i,r,s){var o;return 0===t?e:2===(t/=i/2)?e+n:("undefined"==typeof s&&(s=i*(.3*1.5)),!r||r<Math.abs(n)?(r=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/r),1>t?-.5*(r*Math.pow(2,10*(t-=1))*Math.sin((t*i-o)*(2*Math.PI)/s))+e:r*Math.pow(2,-10*(t-=1))*Math.sin((t*i-o)*(2*Math.PI)/s)*.5+n+e)},"ease-in-back":function(t,e,n,i,r){return"undefined"==typeof r&&(r=1.70158),n*(t/=i)*t*((r+1)*t-r)+e},"ease-out-back":function(t,e,n,i,r){return"undefined"==typeof r&&(r=1.70158),n*((t=t/i-1)*t*((r+1)*t+r)+1)+e},"ease-in-out-back":function(t,e,n,i,r){return"undefined"==typeof r&&(r=1.70158),(t/=i/2)<1?n/2*(t*t*(((r*=1.525)+1)*t-r))+e:n/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e},"ease-in-bounce":function(t,e,n,i){return n-v["ease-out-bounce"](i-t,0,n,i)+e},"ease-out-bounce":function(t,e,n,i){return(t/=i)<1/2.75?n*(7.5625*t*t)+e:2/2.75>t?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},"ease-in-out-bounce":function(t,e,n,i){return i/2>t?.5*v["ease-in-bounce"](2*t,0,n,i)+e:.5*v["ease-out-bounce"](2*t-i,0,n,i)+.5*n+e}},y=function(t){this.from=n.isAvalid(t.from)?t.from:0,this.to=n.isAvalid(t.to)?t.to:100,n.isString(t.fn)?this.fn=v[t.type]||v["ease-out-quart"]:n.isFunction(t.fn)?this.fn=t.fn:this.fn=v["ease-out-quart"],this.during=Math.round((t.during||1e3)/16.7),this.onrunning=t.onrunning,this.onend=t.onend,this.delay=n.isAvalid(t.delay)?t.delay:0,this.isstop=!0};y._run=function(){var t=0,e=this.during,n=this.to-this.from,i=this,r=function(){t++,i.onrunning&&i.onrunning.call(i,i.fn(t,i.from,n,e)),e>t&&!i.isstop?requestAnimationFrame(r):(i.onend&&i.onend.call(i),i.isstop=!0)};r()},y._runs=function(){for(var t=0,e=this.during,n=[],i=this,r=0;r<this.from.length;r++)n.push(this.to[r]||0-this.from[r]);var s=function(){t++;for(var r=[],o=0;o<i.from.length;o++)r.push(i.fn(t,i.from[o],n[o],e));i.onrunning&&i.onrunning.call(i,r),e>t&&!i.isstop?requestAnimationFrame(s):(i.onend&&i.onend.call(i),i.isstop=!0)};s()},y._runo=function(){var t=0,e=this.during,n={},i=this;for(var r in this.from)n[r]=this.to[r]||0-this.from[r];var s=function(){t++;var r={};for(var o in i.from)r[o]=i.fn(t,i.from[o],n[o],e);i.onrunning&&i.onrunning.call(i,r),e>t&&!i.isstop?requestAnimationFrame(s):(i.onend&&i.onend.call(i),i.isstop=!0)};s()},y.prototype.start=function(){var t=this;return this.isstop=!1,setTimeout(function(){n.isArray(t.from)?y._runs.call(t):n.isObject(t.from)?y._runo.call(t):n.isNumber(t.from)&&y._run.call(t)},this.delay),this},y.prototype.stop=function(){return this.isstop=!0,this},y.prototype.isRunning=function(){return this.isstop===!0},y.prototype.clean=function(){for(var t in this)this[t]=null},t.tween=function(t){return new y(t)};var _=function(e){this.mimeType=null,this.iscache=e.cahce||!1,this.data=e.data||"",this.url=e.url||"",this.realURL=e.url||"",this.type=e.type||"post",this.realType=e.dataType||"text",this.dataType=-1!==["arraybuffer","blob","document","text"].indexOf(e.dataType)?e.dataType:"text",this.async=e.async===!1?!1:!0,this.timeout=e.timeout||3e6,this.headers=e.headers||{},this.events=t.extend({readystatechange:null,loadstart:null,progress:null,abort:null,error:null,load:null,timeout:null,loadend:null},e.events);var n=this;this._eventproxy=function(t){var e=n.events[t.type];n.response=this,e&&e.call(n,t),"loadend"===t.type&&n.clean()},this._uploadproxy=function(t){var e=n.events[t.type];n.response=this,e&&e.call(n,t)},this.xhr=new XMLHttpRequest};_.prototype.clean=function(){for(var t in this.events)"progress"===t?this.xhr.upload.removeEventListener(t,this._uploadproxy,!1):this.xhr.removeEventListener(t,this._eventproxy,!1);for(var t in this)this[t]=null},_.prototype.abort=function(){return this.xhr.abort(),this},_.prototype.header=function(t,e){if(1===arguments.length)for(var n in t)this.headers[n]=t[n];else this.headers[t]=e;return this},_.prototype.bind=function(t,e){if(1===arguments.length)for(var n in t)this.events[n]=t[n];else this.events[t]=e;return this},_.prototype.unbind=function(t,e){var n=this.events[t];for(var i in n)n[i]===e&&(n[i]=null);return this},_.prototype.fire=function(){if(this.mimeType&&this.xhr.overrideMimeType(this.mimeType),"get"===this.type){var t=i.queryString(this.data);this.url+=-1!==this.url.indexOf("?")?""===t?"":"&"+t:""===t?"":"?"+t}else this.data=i.postData(this.data);this.xhr.open(this.type,this.url,this.async),this.async&&(this.xhr.responseType=this.dataType,this.xhr.timeout=this.timeout);for(var e in this.events)"progress"===e?this.xhr.upload.addEventListener(e,this._uploadproxy,!1):this.xhr.addEventListener(e,this._eventproxy,!1);this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");for(var e in this.headers)this.xhr.setRequestHeader(e,this.headers[e]);return n.isQueryString(this.data)&&this.xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.xhr.send(this.data),this},_.cache={},t.ajax=function(e){var n=new h,i=!0;if(e){if(e.cache){var s=e.url;try{s+=":"+window.JSON.stringify(e.data),e.cacheKey=s,_.cache[s]&&(i=!1,n.resolve(_.cache[s]))}catch(o){}}return i&&(e.events=t.extend({error:function(t){e.error&&e.error.call(this,t),n.reject(t)},load:function(t){var i=this.response.status;if(i>=200&&300>i||304===i||0===i){var s=this.response.response;if("json"===this.realType){var o=this.response.responseText;try{s=r.parse(o)}catch(t){throw Error("[bright] ajax unvaliable json string,url is '"+e.url+"'")}}e.cache&&e.cacheKey&&(_.cache[e.cacheKey]=s),e.success&&e.success.call(this,s),n.resolve(s)}else e.error&&e.error.call(this,t),n.reject(this.response)}},e.events),new _(e).fire()),n}return n.resolve()},t.request=function(t){return new _(t)};var w={importsmapping:{js:[],css:[],hasJs:function(t){return-1!==this.js.indexOf(t)?!0:!1},hasCss:function(t){return-1!==this.css.indexOf(t)?!0:!1},addJs:function(t){return this.js.push(t),this},addCss:function(t){return this.css.push(t),this}},css:function(e,n,i,r){if((void 0===r||null===r)&&(r=!1),w.importsmapping.hasCss(e))n&&n();else if(r)t.ajax({url:e,dataType:"text",type:"get",async:!0,success:function(t){var e=document.createElement("style");e.type="text/css",e.setAttribute("media","screen"),e.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(e),n&&n(t)},error:function(t){i&&i()}}),w.importsmapping.addJs(e);else{var s=document.createElement("link"),o=null;s.href=e,s.type="text/css",s.rel="stylesheet";var a=function(t){s.removeEventListener("error",a),s.removeEventListener("load",l),i&&i.call(t.target,t)},l=function(t){s.removeEventListener("error",a),s.removeEventListener("load",l),n&&(clearTimeout(o),n.call(t.target,t))};s.addEventListener("error",a,!1),s.addEventListener("load",l,!1),document.getElementsByTagName("head")[0].appendChild(s),w.importsmapping.addCss(e);var p=function(){try{s.sheet.cssRules&&s.sheet.cssRules.length>0&&(s.removeEventListener("error",a),s.removeEventListener("load",l),n&&n.call(s))}catch(t){o=setTimeout(p,100)}};p()}return this},js:function(e,n,i,r,s){if((void 0===s||null===s)&&(s=!0),w.importsmapping.hasJs(e))n&&n();else if(s){var o=function(t){t.target.removeEventListener("load",o),t.target.removeEventListener("error",a),n&&n.call(t.target,t)},a=function(t){t.target.removeEventListener("load",o),t.target.removeEventListener("error",a),i&&i.call(t.target,t)},l=document.createElement("script");l.src=e,l.type="text/javascript";for(var p in r)l[p]=r[p];l.addEventListener("load",o,!1),l.addEventListener("error",a,!1),document.getElementsByTagName("head")[0].appendChild(l),w.importsmapping.addJs(e)}else t.ajax({url:e,dataType:"text",type:"get",async:!1,success:function(t){new Function("try{"+t+"}catch(e){console.error('[bright]imports: %s ,path "+e+"',e.message);}")(),n&&n()},error:function(t){i&&i()}}),w.importsmapping.addJs(e);return this},image:function(t,e,n){var i=document.createElement("img"),r=function(t){t.target.removeEventListener("load",r),t.target.removeEventListener("error",s),e&&e.call(t.target,t)},s=function(t){t.target.removeEventListener("load",r),t.target.removeEventListener("error",s),n&&n.call(t.target,t)};return i.src=t,i.addEventListener("load",r,!1),i.addEventListener("error",s,!1),this},text:function(e,n,i,r){return t.ajax({url:e,data:r,dataType:"text",success:n,type:"get",error:i}),this},html:function(e,n,i,r){return t.ajax({url:e,data:r,dataType:"text",success:n,type:"get",error:i}),this},json:function(e,n,i,r){return t.ajax({url:e,data:r,dataType:"json",success:n,type:"get",error:i}),this},load:function(t,e,n,i){if(t){var r=new l;for(var s in t)for(var o in t[s])r.add(function(t,e){var n=this;w[e.type](e.path,function(t){n.next()},function(t){i&&i.call(n,e.type,e.path)})},null,{type:s,path:t[s][o]});r.complete(function(){e&&e()}).progress(function(t){n&&n({total:t.total,runed:t.runed,progress:Math.floor(t.runed/t.total*100)})}).run()}else e&&e()}};t.loader=function(){return w};var x={id:"",preload:[],basePath:"",debug:!1,update:-1,sourceMapping:{},pretreat:null,urlfilter:null,cacheReset:!1,onpreloadprogress:null,docode:function(t){return t},observers:{},onimportstart:function(t){x.observers[t.packet]&&x.observers[t.packet].onimportstart&&x.observers[t.packet].onimportstart(t)},onimportprogress:function(t){x.observers[t.packet]&&x.observers[t.packet].onimportprogress&&x.observers[t.packet].onimportprogress(t)},onimportend:function(t){x.observers[t.packet]&&x.observers[t.packet].onimportend&&x.observers[t.packet].onimportend(t)}},k=function(e){t.extend(x,{id:e.id?e.id.toUpperCase():"",preload:e.preload,basePath:"/"===e.basePath[e.basePath.length-1]?e.basePath:e.basePath+"/",debug:e.debug,update:e.update,sourceMapping:e.sourceMapping}),n.isEmptyObject(x.sourceMapping)?x.persistence=!1:x.persistence=!0};k.prototype.pretreat=function(t){return t&&(x.pretreat=t),this},k.prototype.setPreloadListener=function(t){return x.onpreloadprogress=t,this},k.prototype.setImportListener=function(t,e){return 2===arguments.length?x.observers[t]=e:1===arguments.length&&n.isObject(t)&&(x.onimportstart=t.onimportstart||null,x.onimportprogress=t.onimportprogress||null,x.onimportend=t.onimportend||null),this},k.prototype.setCodeRewriter=function(t){return t&&(E.docode=t),this},k.prototype.setPathFilter=function(t){return n.isFunction(t)&&(x.urlfilter=t),this},k.prototype.setAppUpdateListener=function(t){return t&&(x.appupdate=t),this},k.prototype.boot=function(e,i){if(x.persistence){var r="PACKETBUILD["+x.id+"]";
try{var s=window.localStorage.getItem(r),o=s.match(/[0-9]+/),a=0;o&&(a=parseInt(o[0])),x.currentBuild=a}catch(l){x.currentBuild=0}var p=parseInt(x.sourceMapping.build.substring(x.id.length));if(x.update=parseInt(x.update),(0===x.update||x.currentBuild<=x.update||x.currentBuild>p)&&0!==x.currentBuild){x.cacheReset=!0;try{x.appupdate&&x.appupdate({old:x.currentBuild,current:x.sourceMapping.build,update:x.update})}catch(l){console.error("[bright] onappupdate called error "+l.message)}}}else x.update=-1,x.currentBuild=0,x.cacheReset=!0;E.jspersistence=new j("js"),E.csspersistence=new j("css"),E.jsonpersistence=new j("json"),E.textpersistence=new j("text"),E.htmlpersistence=new j("html"),E.imagepersistence=new j("image"),E.templatepersistence=new j("template"),E.codepersistence=new j("code"),E.otherpersistence=new j("other");try{window.localStorage.setItem(r,x.sourceMapping.build)}catch(l){}x.debug&&(t.debug={modules:I.factory,options:L.options,json:E.jsonpersistence._data,resource:{js:E.jspersistence,css:E.cssmapping,text:E.textpersistence,html:E.htmlpersistence,image:E.imagepersistence},require:E.requiremapping,doms:E.templatepersistence._data});var h=null,u=arguments.length;t().ready(function(){1===u?(h=$("body"),i=e):2===u&&(h=$(e)),E.preload(function(){E.pretreat().done(function(){n.isString(i)?(h.dataset("view","root").dataset("viewId","root").dataset("option",i),i={}):h.dataset("view","root").dataset("viewId","root").dataset("option",""),x.debug&&console.log("[bright] version:0.10.4,debug:"+x.debug+",basePath:"+x.basePath);var e=t("*[data-view='root']");if(!(e.length>0))throw Error("[bright boot] can not find the root element.");I.getViewInstance(e,i,function(t){t.privator("render")})})})})},t.App=function(t){return new k(t)};var N=function(){this._packets_={},this.exports={},this._depends=[],this.children=[],this.packet="",this.require=[],this.include=[],this.template=[],this.js=[],this.css=[],this.html=[],this.json=[],this.image=[],this.text=[],this.usestrict=!1};N.prototype.getTemplate=function(t,e){for(var n in this.template)if(this.template[n].packet===t)return this.template[n].value[e]||""},N.prototype.getJson=function(t){for(var e in this.json)if(this.json[e].packet===t)return this.json[e].value||{}},N.prototype.getImage=function(t){for(var e in this.image)if(this.image[e].packet===t)return this.image[e].value||{}},N.prototype.getHtml=function(t){for(var e in this.html)if(this.html[e].packet===t)return this.html[e].value||{}},N.prototype.getText=function(t){for(var e in this.text)if(this.text[e].packet===t)return this.text[e].value||{}},N.prototype.getParent=function(){return E.requiremapping[this.parent]||{}},N.prototype.getChild=function(t){return t>=0&&t<this.children.length?E.requiremapping[this.children[t]]||{}:void 0},N.prototype.getChildren=function(){for(var t=[],e=0;e<this.children.length;e++)t.push(E.requiremapping[this.children[e]]);return t};var j=function(t){this.type=t,this.cacheId="PACKETCACHE["+x.id+":"+this.type.toUpperCase()+"]",this._data={},this.currentTempHash=x.sourceMapping?x.sourceMapping[this.type]||{}:{},this.init()};j.getStaitcFile=function(t,e,n){var i=E[t+"persistence"];if(i&&"json"===t||"html"===t||"text"===t||"image"===t){var r=j.getStaticPath(t,e),s=!0;r||(s=!1,r=x.basePath+e.replace(/\./g,"/")+"."+t),s||x.sourceMapping&&x.sourceMapping[t][e]&&i.set(e,x.sourceMapping[t][e],r).save(),w[t](j.getStaticPath(t,e),function(t){n&&n(t)})}},j.getStaticPath=function(t,e){var n=E[t+"persistence"],i=null;if(x.sourceMapping&&x.sourceMapping[t]&&x.sourceMapping[t][e])if(n.check(e))i=n.get(e);else{if("json"!==t&&"text"!==t&&"html"!==t){var r=e.match(E.issuffix),s="."+t;"image"===t&&(s="png"),r&&(s=r[0].substring(1,r[0].length-1)),i=x.basePath+e.replace(E.issuffix,"").replace(E.isdot,"/")+s}else i=x.basePath+e.split(".").join("/")+("json"===t?".json":"html"===t?".html":"text"===t?".txt":".json");n.set(e,x.sourceMapping[t][e],i).save()}else if("json"!==t&&"text"!==t&&"html"!==t){var r=e.match(E.issuffix),s="."+t;"image"===t&&(s="png"),r&&(s=r[0].substring(1,r[0].length-1)),i=x.basePath+e.replace(E.issuffix,"").replace(E.isdot,"/")+s}else i=x.basePath+e.split(".").join("/")+("json"===t?".json":"html"===t?".html":"text"===t?".txt":".json");return i},j.prototype.save=function(){if(x.persistence){var t=this;setTimeout(function(){try{window.localStorage.setItem(t.cacheId,window.JSON.stringify(t._data))}catch(e){}},0)}},j.prototype.clean=function(){try{window.localStorage.removeItem(this.cacheId)}catch(t){console.log(t)}},j.prototype.init=function(){if(x.persistence){if(x.cacheReset)try{window.localStorage.removeItem(this.cacheId)}catch(t){}try{var e=window.JSON.parse(window.localStorage.getItem(this.cacheId))||{};this._data=e}catch(t){}}else try{window.localStorage.removeItem(this.cacheId)}catch(t){}return this},j.prototype.get=function(t){return this._data[t]?this._data[t].data:null},j.prototype.has=function(t,e){return this._data[t]&&this.data[t].hash===e},j.prototype.set=function(t,e,n){return this._data[t]={hash:e,data:n},this},j.prototype.check=function(t){var e=this.getCurrentHash(t),n=this._data[t]?this._data[t].hash:null;return e&&e===n},j.prototype.getCurrentHash=function(t){return this.currentTempHash[t]},j.prototype.isLoaded=function(){return!n.isEmptyObject(this._data)};var T=function(t){this.promise=t};T.prototype.done=function(){this.promise.resolve()},T.prototype.json=function(t,e){j.getStaitcFile("json",t,e)},T.prototype.html=function(t,e){j.getStaitcFile("html",t,e)},T.prototype.text=function(t,e){j.getStaitcFile("text",t,e)},T.prototype.image=function(t,e){j.getStaitcFile("image",t,e)},T.prototype.path=function(t,e){j.getStaticPath(t,e)};var E=function(e){var n={basepath:x.basePath,packetName:"",back:null,target:"",onimportstart:x.onimportstart,onimportend:x.onimportend,onimportprogress:x.onimportprogress},i=this;if(t.extend(n,e),""!==n.packetName){var r=n.packetName.match(E.issuffix),s=null;r&&(s=r[0].substring(1,r[0].length-1));var o=n.basepath+n.packetName.replace(E.isdot,"/")+(s?"."+s:".js");this.option=n,this.option.path=o,this.info=[],-1===E.packetmapping.indexOf(o)?(n.onimportstart&&n.onimportstart({packet:n.packetName,path:o}),this.load(n.packetName,o,function(){var e=E.dependsSort.call(i,i.info);if(e.length!==i.info.length)throw Error("[bright] packet _depends error,maybe has circle _depends,or some file has no packet info.");i.info=e;for(var r=0;r<i.info.length;r++){var s=i.info[r].info;E.requiremapping[s.packet]=s;var a=E.docode(i.info[r].code,s),l="";a=E.deleteR(a)+"$.is.isEmptyObject(module.exports)?(module.exports=exports):'';","true"===s.usestrict?(s.usestrict=!0,l=x.debug?'"use strict";'+a+"//# sourceURL="+s.path:a):l=x.debug?a+"//# sourceURL="+s.path:a;try{s.basePath=n.basepath,s.folder=s.path.substring(0,s.path.lastIndexOf("/"))+"/",t.___info=s,new Function("$","Module","Option","module","exports","require","Plugin","Method",l).call(s,t,t.Module,t.Option,s,{},function(t){var e=E.requiremapping[t];if(e)return e.exports;throw Error("[bright] method require() called error,packet of "+t+" is not required in packet of "+s.packet)},function(e){t.Plugin(e)},function(e){t.Method(e)}),t.___info=null}catch(p){t.___info=null,console.error("[bright] packet import error name of "+s.packet+" path of "+s.path+" Message:"+p.stack)}}E.packetmapping.push(o),i.option.back&&i.option.back(),i.option.onimportend&&i.option.onimportend({packet:i.option.packetName,path:i.option.path}),i.clean()},n.target)):(i.option.back&&i.option.back(),i.clean())}};E.i=/\r\n/g,E.k=/\r/g,E.l=/\n/g,E.f=/>[\s]+</g,E.isdot=/\./g,E.issuffix=/\[.*\]/g,E.isNote=/\/\*[\w\W]*?\*\//,E.isNoteall=/\/\*[\w\W]*?\*\//g,E.isInfo=/@([\s\S]*?);/g,E.isPacketTag=/["\']@[A-Za-z0-9_\[\]-]+\.[A-Za-z0-9_-]*["\']/g,E.isCurrentTag=/["\']@\.[A-Za-z0-9_-]+["\']/g,E.isPacket=/["\']@[A-Za-z0-9_\[\]-]+["\']/g,E.isOther=/["\']\\@[A-Za-z0-9_-]+["\']/g,E.isNotep=/\<\!\-\-\[[0-9a-zA-Z-_]*?\]\-\-\>/,E.isNotes=/\<\!\-\-\[[0-9a-zA-Z-_]*?\]\-\-\>/g,E.isNotec=/\<\!\-\-[\s\S]*?\-\-\>/g,E.isNotet=/\<\!\-\-\[@[\s\S]*?;\]\-\-\>/,E.isNotets=/\<\!\-\-\[@[\s\S]*?;\]\-\-\>/g,E.isCssPath=/url\(.+?\)/g,E.packetmapping=[],E.cssmapping=[],E.jsmapping=[],E.imagemapping={},E.requiremapping={},E.packetDone=[],E.deleteR=function(t){if(x.debug){for(var e=0;2>e;e++)t=t.replace(/\n/,"");return t}return t},E.docode=function(t){return t},E.pretreat=function(){var e=t.promise();return x.pretreat?x.pretreat.call(new T(e)):e.resolve(),e},E.dependsSort=function(t){for(var e=[],n=[],i=0;i<t.length;i++){var r=t[i];r.dependTimes=r.info._depends.length;for(var s=0;s<r.info._depends.length;s++){var o=r.info._depends[s];-1!==E.packetDone.indexOf(o)&&(r.dependTimes=r.dependTimes-1)}}for(var i=0;i<t.length;i++){var r=t[i];0===r.dependTimes||0===r.info._depends.length?(E.packetDone.push(r.info.packet),e.push(r)):(r.dependTimes=r.info._depends.length,n.push(r))}for(var i=0;i<e.length;i++)for(var r=e[i],s=0;s<n.length;s++){var a=n[s];if(-1!==a.info._depends.indexOf(r.info.packet)&&(a.dependTimes=a.dependTimes-1,a.dependTimes<=0)){E.packetDone.push(a.info.packet),e.push(a),n.splice(s,1);break}}for(var i=0;i<n.length;i++)for(var r=n[i],s=0;s<r.info._depends.length;s++){var a=r.info._depends[s];if(-1!==E.packetDone.indexOf(a)&&(r.dependTimes=r.dependTimes-1,r.dependTimes<=0)){E.packetDone.push(r.packet),e.push(r),n.splice(i,1);break}}return e},E.getPacketInfo=function(t){var e=t.match(E.isNote),n=this.option.basepath,i=new N;if(e&&e.length>0)for(var r=e[0],s=r.match(E.isInfo),o=0;o<s.length;o++){var e=s[o],a=e.split(" ");if(a.length>=2){var l=a[0].substring(1,a[0].length),p=";"===a[1][a[1].length-1]?a[1].substring(0,a[1].length-1):a[1],h=null;i[l]||(i[l]=[]);var u=p.match(E.issuffix);u&&(h=u[0].substring(1,u[0].length-1));var c=p.split(":");if(c.length>1){var d=c[c.length-1];"image"!==l&&(d=d.replace(E.issuffix,"")),c.splice(c.length-1,1),p=c.join(":"),i._packets_[d]=p}else{var f=c[0].split("."),d=f[f.length-1];"image"!==l&&(d=d.replace(E.issuffix,"")),i._packets_[d]=c[0]}switch(l){case"packet":i.packet=p.replace(E.issuffix,""),i.path=n+i.packet.replace(E.isdot,"/")+".js";break;case"require":p={packet:p.replace(E.issuffix,""),path:"",value:null},i._depends.push(c[0]),i.children.push(c[0]),p.path=n+c[0].replace(E.issuffix,"").replace(E.isdot,"/")+".js";break;case"include":p={packet:p.replace(E.issuffix,""),path:"",value:null},i.children.push(c[0]),p.path=n+c[0].replace(E.issuffix,"").replace(E.isdot,"/")+".js";break;case"json":p={packet:p.replace(E.issuffix,""),path:n+p.replace(E.issuffix,"").replace(E.isdot,"/")+".json",value:null};break;case"template":p={packet:p.replace(E.issuffix,""),path:n+p.replace(E.issuffix,"").replace(E.isdot,"/")+".html",value:null};break;case"html":p={packet:p.replace(E.issuffix,""),path:n+p.replace(E.issuffix,"").replace(E.isdot,"/")+".html",value:null};break;case"image":p={packet:p,path:n+p.replace(E.issuffix,"").replace(E.isdot,"/")+(h?"."+h:".png"),value:null};break;case"text":p={packet:p.replace(E.issuffix,""),path:n+p.replace(E.issuffix,"").replace(E.isdot,"/")+".txt",value:null};break;case"css":p={packet:p.replace(E.issuffix,""),path:"",value:null},-1===p.packet.indexOf("http")&&(-1===p.packet.indexOf("/")?p.path=n+p.packet.replace(E.issuffix,"").replace(E.isdot,"/")+".css":p.path=basePath+p.packet);break;case"js":var g=p;p={packet:p.replace(E.issuffix,""),path:"",value:null},-1===p.packet.indexOf("http")?-1===p.packet.indexOf("/")?p.path=n+p.packet.replace(E.issuffix,"").replace(E.isdot,"/")+".js":p.path=basePath+p.packet:p.path=g;break;default:i[l]=p}-1===i[l].indexOf(p)&&i[l].push(p)}}else i.packet="nopacket";return i},E.replacePacketNames=function(t,e){return e.replace(E.isPacketTag,function(e){var n=e.split("."),i=0,r=n[1].substring(0,n[1].length-1),i=n[0].substring(2);if(t._packets_[i])return e[0]+t._packets_[i]+"."+r+e[e.length-1];throw Error("[bright] packet can not find with tag of "+e+",packet is "+t.packet)}).replace(E.isCurrentTag,function(e){return e[0]+t.packet+"."+e.split(".")[1]}).replace(E.isPacket,function(e){var n=e.substring(2,e.length-1);if(t._packets_[n])return e[0]+t._packets_[n]+e[e.length-1];throw Error("[bright] packet can not find with tag of "+e+",packet is "+t.packet)}).replace(E.isOther,function(t){return t.substring(1)})},E.parseCode=function(t){for(var e=[],n=E.isNoteall.exec(t);n;){var i=n[0].match(/@packet .*;/);if(i){var r=i[0].substring(8,i[0].length-1).split(" ");i=r[0],e.push({index:n.index,packet:i})}n=E.isNoteall.exec(t)}for(var s=0;s<e.length;s++){var o=e[s+1]?e[s+1].index:t.length;E.codepersistence.set(e[s].packet,E.codepersistence.getCurrentHash(e[s].packet),t.substring(e[s].index,o)).save()}},E.parseTemplate=function(t){t=t.replace(E.f,"><").replace(E.i,"").replace(E.k,"").replace(E.l,"");var e=t.split(E.isNotet);if(e.length>1)for(var n=t.match(E.isNotets),i=0;i<n.length;i++){var r=n[i].substring(13,n[i].length-5).split(" "),s=r[0],o=E.replaceHtmlPath(s,e[i+1]);if(""!==o){for(var a={},l=o.split(E.isNotep),p=o.match(E.isNotes),h=0;h<p.length;h++){var u=p[h].substring(5,p[h].length-4);a[u]=l[h+1].replace(E.isNotec,"")}E.templatepersistence.set(s,E.templatepersistence.getCurrentHash(s),a).save()}}},E.parseCss=function(t){for(var e=[],n=E.isNoteall.exec(t);n;){var i=n[0].match(/@packet .*;/);if(i){var r=i[0].substring(8,i[0].length-1).split(" ");i=r[0],e.push({index:n.index,packet:i})}n=E.isNoteall.exec(t)}for(var s=0;s<e.length;s++){var o=e[s+1]?e[s+1].index:t.length,a=E.replaceCssPath(e[s].packet,t.substring(e[s].index,o).replace(E.isNoteall,""));E.csspersistence.set(e[s].packet,E.csspersistence.getCurrentHash(e[s].packet),a).save()}},E.preload=function(e){var n=t.queue();n.complete(function(){e&&e()}),n.progress(function(t){x.onpreloadprogress&&x.onpreloadprogress(t)}),E.codepersistence.isLoaded()||x.sourceMapping.source&&n.add(function(){var t=this;w.js(x.sourceMapping.source,function(){t.next()},function(){t.next()})}),E.loadpreloadFile(n),n.run()},E.loadpreloadFile=function(t){for(var e in x.preload){var n=x.preload[e],i=x.basePath+"/"+n.split(".").join("/")+".js";if(E.jspersistence.check(n))i=E.jspersistence.get(n);else if(x.sourceMapping&&x.sourceMapping.js){var r=x.sourceMapping&&x.sourceMapping.js[n];r&&E.jspersistence.set(n,r,i).save()}t.add(function(t,e){var n=this;w.js(e,function(){n.next()},function(){n.next()})},null,i)}},E.loadTextFile=function(e,n,i){for(var r=0;r<e.length;r++){var s=e[r].path;E[n+"persistence"].check(e[r].packet)?e[r].value=E[n+"persistence"].get(e[r].packet):(e[r].path=x.urlfilter?x.urlfilter({type:n,path:s,packet:e[r].packet}):s,i.add(function(e,r){t.ajax({url:r.path,type:"get",dataType:n,success:function(t){"html"===n&&(t=E.replaceHtmlPath(r.packet,t)),r.value=t,E[n+"persistence"].set(r.packet,E[n+"persistence"].getCurrentHash(r.packet),t).save(),i.next()}})},null,e[r]))}},E.load=function(e,n,i,r){var s=this,o=E.getPacketInfo.call(s,e);o.parent=i,"nopacket"===o.packet&&console.error("[bright] file has no packet info,path of "+r);try{e=E.replacePacketNames.call(s,o,e)}catch(e){console.error(e.stack)}s.info.push({info:o,code:e});var a=t.queue();a.progress(function(t){t.packet=o.packet,s.option.onimportprogress&&s.option.onimportprogress(t)}),a.complete(function(){n&&n()}),E.loadTextFile(o.json,"json",a),E.loadTextFile(o.html,"html",a),E.loadTextFile(o.text,"text",a);for(var l=0;l<o.js.length;l++){var p=o.js[l].path;E.jsmapping.indexOf(-1===o.js[l].path)&&(E.jsmapping.push(p),E.jspersistence.check(o.js[l].packet)?p=E.jspersistence.get(o.js[l].packet):(p=x.urlfilter?x.urlfilter({type:"css",path:p,packet:o.js[l].packet}):p,E.jspersistence.set(o.js[l].packet,E.jspersistence.getCurrentHash(o.js[l].packet),p).save()),a.add(function(t,e){w.js(e,function(){a.next()})},null,p))}for(var l=0;l<o.css.length;l++)if(-1===E.cssmapping.indexOf(o.css[l].path)){E.cssmapping.push(o.css[l].path);var p=o.css[l].path,h=E.csspersistence.check(o.css[l].packet);if(h){var u=E.csspersistence.get(o.css[l].packet),c=document.createElement("style");c.type="text/css",c.setAttribute("media","screen"),c.setAttribute("packet",o.css[l].packet),document.getElementsByTagName("head")[0].appendChild(c),o.css[l].value=c,c.appendChild(document.createTextNode(u))}else o.css[l].path=x.urlfilter?x.urlfilter({type:"css",path:p,packet:o.css[l].packet}):p,a.add(function(e,n){x.persistence?t.ajax({url:n.path,dataType:"text",type:"get",async:!0,success:function(t){var e=E.replaceCssPath(n.packet,t),i=document.createElement("style");i.type="text/css",i.setAttribute("media","screen"),i.setAttribute("packet",n.packet),document.getElementsByTagName("head")[0].appendChild(i),i.appendChild(document.createTextNode(e)),n.value=i,E.csspersistence.set(n.packet,E.csspersistence.getCurrentHash(n.packet),e).save(),a.next()}}):w.css(n.path,function(){a.next()})},null,o.css[l])}for(var l=0;l<o.template.length;l++){var p=o.template[l].path,h=E.templatepersistence.check(o.template[l].packet);h?o.template[l].value=E.templatepersistence.get(o.template[l].packet):(o.template[l].path=x.urlfilter?x.urlfilter({type:"template",path:p,packet:o.template[l].packet}):p,a.add(function(e,n){t.ajax({url:n.path,type:"get",dataType:"text",success:function(t){t=t.replace(E.f,"><").replace(E.i,"").replace(E.k,"").replace(E.l,""),t=E.replaceHtmlPath(n.packet,t);for(var e={},i=t.split(E.isNotep),r=t.match(E.isNotes),s=0;s<r.length;s++){var o=r[s].substring(5,r[s].length-4);e[o]=i[s+1].replace(E.isNotec,"")}n.value=e,E.templatepersistence.set(n.packet,E.templatepersistence.getCurrentHash(n.packet),e).save(),a.next()}})},null,o.template[l]))}for(var l=0;l<o.image.length;l++)if(E.imagemapping[o.image[l].packet])o.image[l].value=E.imagemapping[o.image[l].packet];else{if(E.imagepersistence.check(o.image[l].packet))p=E.imagepersistence.get(o.image[l].packet);else{var p=o.image[l].path;o.image[l].path=x.urlfilter?x.urlfilter({type:"image",path:p,packet:o.image[l].packet}):p,E.imagepersistence.set(o.image[l].packet,E.imagepersistence.getCurrentHash(o.image[l].packet),p).save()}a.add(function(t,e){w.image(e.path,function(){E.imagemapping[e.packet]=this,e.value=this,a.next()})},null,o.image[l])}for(var l=0;l<o.require.length;l++){var p=o.require[l].path;o.require[l].path=x.urlfilter?x.urlfilter({type:"js",path:p,packet:o.require[l].packet}):p,-1===E.packetmapping.indexOf(p)&&(E.packetmapping.push(p),a.add(function(t,e){s.load(e.packet,e.path,function(){a.next()},e.parent)},null,{path:o.require[l].path,parent:o.packet,packet:o.require[l].packet}))}a.run()},E.replaceCssPath=function(t,e){var n=E.csspersistence.get(t),i=[];if(n){var r=n.match(/url\(.+?\)/g);if(r)for(var s=0;s<r.length;s++)i.push(r[s])}var o=t.split(".");o.splice(o.length-1,1);var a=x.basePath.length>0?"/"===x.basePath[x.basePath.length-1]?x.basePath:x.basePath+"/":"",l=a+o.join("/");return e.replace(/url\(.+?\)/g,function(e){e=e.substring(4,e.length-1);var n=!1,r=e;("'"===e[0]||'"'===e[0])&&(n=!0,e=e.substring(1,e.length-1));for(var s=e.split("/"),o=s[s.length-1].split(".")[0],p=!1,h=0;h<i.length;h++)if(-1!==i[h].indexOf(o)){p=!0,r=i[h];break}if(!p){if("."===e[0]&&"/"===e[1])r=l+e.substring(1);else{var u=e.match(/\.\.\//g),c=t.split(".");c.splice(c.length-1,1),u?(c.splice(c.length-u.length,u.length),e=e.substring(3*u.length),r=c.length>0?a+c.join("/")+"/"+e:a+e):r="/"===e[0]?e:l+"/"+e}r=n?"url('"+r+"')":"url("+r+")"}return r})},E.replaceHtmlPath=function(t,e){var n=E.templatepersistence.get(t),i="",r=[];if(n){for(var s in n)i+=n[s];var o=i.match(/src=['"].+?['"]/g);if(o)for(var s=0;s<o.length;s++)r.push(o[s])}return e.replace(/src=['"].+?['"]/g,function(t){if(-1===t.indexOf("<%")){var e=t,n=t.substring(5,t.length-1),s=n.split("/"),o=s[s.length-1].split(".")[0],a=!1;if(-1!==i.indexOf(o))for(var l=0;l<r.length;l++)if(-1!==r[l].indexOf(o)){e=r[l],a=!0;break}return a||(e='src="'+x.basePath+t.substring(5,t.length-1)+'"'),e}return t})},E.prototype.load=function(e,n,i,r){var s=this,o=n;E.codepersistence.check(e)?E.load.call(this,E.codepersistence.get(e),i,r,o):(n=x.urlfilter?x.urlfilter({type:"js",path:n,packet:e}):n,t.ajax({url:n,dataType:"text",type:"get",success:function(t){E.codepersistence.set(e,E.codepersistence.getCurrentHash(e),t).save(),E.load.call(s,t,i,r,o)},error:function(t){i&&i()}}))},E.prototype.clean=function(){for(var t in this)this[t]=null},t.packet=function(t){new E(t)},t.source=function(t){for(var e in t){var n=!0;E[e+"persistence"].isLoaded()&&(n=!1),n&&E["parse"+e[0].toUpperCase()+e.substring(1)](t[e])}},t._packet=E;var O=function(e,n){e=O.cache(e);var i=O.precompile(e);this._scope=i.info,this._code=O.code(i.template),this._fn=O.compile(this._code),this._session=null,this._caching={},this._macrofn=n||{},t.extend(this._macrofn,O.globalMacro)};O.a=/&lt;%/g,O.b=/%&gt;/g,O.c=/&quot;/g,O.d=/<%|%>/g,O.e=/^=.*;$/,O.f=/>[\s]+</g,O.g=/\{\{.*\}\}/,O.h=/\<\!\-\-[\s\S]*?\-\-\>/g,O.j=/\{\{|\}\}/,O.i=/\r\n/g,O.k=/\r/g,O.l=/\n/g,O.m=/"/g,O.ch=/@cache\(.*?\)/g,O.globalMacro={include:function(t,e){var n=new O(t.template),i=n.render(t.data);for(var r in n._caching)this._caching[r]=n._caching[r];return i}},O.code=function(t){for(var e="var out='';",n=t.replace(O.a,"<%").replace(O.b,"%>").split(O.d),i=0;i<n.length;i++){var r=n[i];e+=i%2!==0?O.e.test(r)?"out+"+r:r:'out+="'+r.replace(O.m,'\\"')+'";'}return e+="return out;"},O.compile=function(t){try{return new Function("data","fn",t)}catch(e){return console.error("[template error] "+e.message),console.info("[template result] "+t),function(){return""}}},O.precompile=function(t){if(t=t.replace(O.h,"").replace(O.f,"><").replace(O.i,"").replace(O.k,"").replace(O.l,""),-1!==t.indexOf("<@")){for(var e,n=-1,i="",r="start",s="",o="",a="",l=!0,p="",h={},u=0,c=0,d=0,f=0,g=[];n<t.length;)n++,i=t[n],"start"!==r||"<"!==i||"@"!==t[n+1]?"tagstart"!==r||"@"!==i?"start"!==r||"<"!==i||"/"!==t[n+1]||"@"!==t[n+2]?"endtag"!==r||">"!==i?"tagname"!==r||" "!==i?"tagname"!==r||"/"!==i&&">"!==i?"propname"!==r||"="!==i?"propvalue"!==r||"'"!==i&&'"'!==i?"propvalueing"!==r||i!==e?("endtag"===r&&(p+=i),"tagname"===r&&(s+=i),"propname"===r&&(o+=i),"propvalueing"===r&&(a+=i)):(r="tagname",h[o]=a):(r="propvalueing",e=i,a=""):r="propvalue":(">"===i?(c=n+1,r="start",l=!0):"/"===i&&(c=n+2,r="start",l=!1),""!==s&&g.push({type:"tag",tagname:s,props:h,body:l,start:u,end:c})):(r="propname",o=""):(r="start",f=n+1,g.push({type:"endtag",tagname:p,start:d,end:f})):(d=n,r="endtag",p="",n+=2):(r="tagname",s="",h={}):(r="tagstart",u=n);var m=0,v=0,y=0,_=!1,i=null,b=[],w="",x=0,k=[];for(var n in g)"tag"===g[n].type&&g[n].body===!1&&_===!1&&(g[n].bodystr="",g[n].from=g[n].start,g[n].to=g[n].end,b.push(g[n])),"tag"===g[n].type&&g[n].body===!0&&(_=!0,null===i&&(i=g[n],i.from=g[n].start),0===m&&(v=g[n].start,y=g[n].end),m++),"endtag"===g[n].type&&(m--,0===m&&(i.to=g[n].end,i.bodystr=t.substring(y,g[n].start),b.push(i),i=null,_=!1));for(var n in b){var N=b[n].props,j="";for(var T in N){var E=N[T];if(O.g.test(E)){for(var M=E.split(O.j),C="",S=1;S<=M.length;S++)S%2===0?""!==M[S-1]&&(C+=M[S-1]+"+"):C+=""!==M[S-1]?"'"+M[S-1]+"'+":M[S-1];var A=C.length>0?C.substring(0,C.length-1):"''";j+=T+":"+A+","}else j+=T+":'"+N[T]+"',"}b[n].parameter="{"+(j.length>0?j.substring(0,j.length-1):j)+"}",k.push({name:b[n].tagname,body:b[n].bodystr,parameter:b[n].parameter});var q=t.substring(x,b[n].from);w+=q,w+="<%=this._macro("+n+(""===b[n].parameter?"":","+b[n].parameter)+");%>",x=b[n].to}return w+=t.substring(x,t.length),{template:w,info:k}}return{template:t,info:[]}},O.cache=function(t){return t.replace(O.ch,function(t){var e=t.substring(7,t.length-1);return"data-cache='<%=this._cache("+e+");%>'"})},O.prototype._cache=function(t){var e=!1;for(var n in this._caching)if(this._caching[n]===t)return e=!0,n;if(!e){var i=o.uuid();return this._caching[i]=t,i}},O.prototype._macro=function(t,e){var n=this._scope[t],i=this;return this._macrofn[n.name]?this._macrofn[n.name].call(this,e,function(){if(""!==n.body){var t=new O(n.body).macro(i._macrofn);return t._caching=i._caching,t.render.apply(t,i._session)}return""}):"[nodata]"},O.prototype.session=function(){return 0===arguments.length?this._session:(this._session=arguments[0],this)},O.prototype.render=function(){return this._session=Array.prototype.slice.call(arguments),this._fn.apply(this,this._session)},O.prototype.renderTo=function(t){var e=Array.prototype.slice.call(arguments);e.splice(0,1),this._session=e;var n=this._fn.apply(this,this._session);this.flush(t.html(n))},O.prototype.renderAppendTo=function(t){var e=Array.prototype.slice.call(arguments);e.splice(0,1),this._session=e;var n=this._fn.apply(this,this._session);this.flush($(n).appendTo(t))},O.prototype.flush=function(t){var e=this;t.find("[data-cache]").add(t).each(function(){var t=$(this).dataset("cache");t&&$(this).data("-cache-",e._caching[t]).removeAttr("data-cache")})},O.prototype.code=function(){return this._code},O.prototype.fn=function(){return 1===arguments.length?(this._fn=arguments[0],this):this._fn},O.prototype.macro=function(t,e){return 1===arguments.length?this._macrofn=t||{}:2===arguments.length&&(this._macrofn[t]=e),this},O.prototype.clean=function(){for(var t in this)this[t]=null},t.template=function(){var t=Array.prototype.slice.call(arguments).join("");return new O(t)},t.setTemplateGlobalMacro=function(e,n){return 1===arguments.length?t.extend(O.globalMacro,e):2===arguments.length&&(O.globalMacro[e]=n),this},f.prototype.template=function(){var t=new O(e.html()),e=this;return{render:function(n,i){return e.html(t.render(n,i)),e},compile:function(e,n){return t.render(e,n)}}};var M=function(){};M._invoke=function(t,e){var i=this.__adapt__._factory.mapping[this.__adapt__._parent],r=this.__adapt__._factory.mapping[this.__adapt__._type],s=[],o=this;if(!i||!i.prototype[t])return void 0;var a=i.prototype[t];if(!n.isFunction(a))return a;for(var l=new i,p=Object.keys(this),h=0;h<p.length;h++)l[p[h]]=this[p[h]];for(var h in r.prototype)n.isFunction(r.prototype[h])?i.prototype[h]||(s.push(h),function(t){l[t]=function(){return o[t].apply(o,Array.prototype.slice.call(arguments))}}(h)):(s.push(h),l[h]=this[h]);try{for(var u=a.apply(l,e),c=Object.keys(l),h=0;h<c.length;h++)-1===s.indexOf(c[h])&&(this[c[h]]=l[c[h]]);return u}catch(d){return console.error(d.message),null}},M.prototype.privator=function(t){var e=this.__adapt__._private["_"+t];if(e){var n=Array.prototype.slice.call(arguments);return n.splice(0,1),e.apply(this,n)}return null},M.prototype.staticor=function(t,e){var i=this.__adapt__._static["__"+t];if(n.isFunction(i)){var r=Array.prototype.slice.call(arguments);return r.splice(0,2),i.apply(e,r)}return i},M.prototype.type=function(){return this.__adapt__._type},M.prototype.shortName=function(){return this.__adapt__._shortName},M.prototype.packet=function(){return this.__adapt__._packet},M.prototype.typeOf=function(t){return void 0!==this.__adapt__._mapping[t]},M.prototype.extendsOf=function(t){for(var e in this.__adapt__._extendslink)if(this.__adapt__._extendslink[e]===t)return!0;return!1},M.prototype.factory=function(){return this.__adapt__._factory},M.prototype.clean=function(){this.__adapt__._factory=null;var t=Object.keys(this);for(var e in t)this[t[e]]=null},M.prototype.isSingleton=function(){return this.__adapt__._singleton},M.prototype.superClass=function(t){var e=Array.prototype.slice.call(arguments);return e.splice(0,1),M._invoke.call(this,t,e)},M.prototype.invokeClass=function(t,e){var n=Array.prototype.slice.call(arguments);return n.splice(0,2),M._invoke.call(this,e,n)},Object.defineProperty(M.prototype,"__adapt__",{enumerable:!1,configurable:!1,writable:!1,value:{_type:"adapt",_shortName:"adapt",_packet:"",_parent:null,_factory:null,_private:null,_static:null,_option:null,_mapping:{},_original_option:[],_instance_props:["privator","staticor","type","shortName","packet","typeOf","factory","clean","superClass"],_extendslink:[]}});var C=function(){this.mapping={adapt:M}},S={};C.a=/^(init)$|^_\w*/,C.b=/^(name)|(extend)|(option)/,C.c=/^(packet)|(layout)/,C.d=/^__/,C.e=/^_/,C.prototype.def=function(e){var i=new Function,r={_type:(e.packet&&""!==e.packet?e.packet+".":"")+e.name,_shortName:e.name||"",_packet:e.packet||"",_mapping:{adapt:1},_extendslink:[],_instance_props:[],_private:{},_static:{},_factory:this,_singleton:null===e.singleton?e.singleton:!1,_option:e.option||{},_original_option:[]};r._mapping[r._type]=1;for(var s in e.option)r._original_option.push(s);var o=new M;!e.extend&&(e.extend=["adapt"]);var a=e.extend;n.isString(e.extend)&&(a=[e.extend]),r._parent=a[0];var l=t.extend({},t.json.clone(this.mapping[a[0]].prototype.__adapt__._option));r._option=t.extend(l,r._option);for(var s=a.length-1;s>=0;s--)if("adapt"!==a[s]){var p=this.mapping[a[s]].prototype,h={},u={},c={};t.extend(h,t.json.clone(p.__adapt__._mapping)),t.extend(u,p.__adapt__._private),t.extend(c,p.__adapt__._static),t.extend(r._mapping,h),t.extend(r._private,u),t.extend(r._static,c);for(var d=Object.keys(p),f=0;f<d.length;f++)t.is.isFunction(p[f])?C.a.test(f)||(o[d[f]]=p[d[f]]):o[d[f]]=p[d[f]]}Object.defineProperty(o,"__adapt__",{enumerable:!1,configurable:!1,writable:!1,value:r});for(var s in e)C.d.test(s)?r._static[s]=e[s]:n.isFunction(e[s])?C.e.test(s)?r._private[s]=e[s]:(o[s]=e[s],"init"!==s&&r._instance_props.push(s)):C.b.test(s)||(o[s]=e[s],C.c.test(s)||r._instance_props.push(s));i.prototype=o;for(var g=i;g;)r._extendslink.push(g.prototype.__adapt__._type),g=this.mapping[g.prototype.__adapt__._parent];return this.mapping[r._type]=i,this},C.prototype.get=function(t){return this.mapping[t]},C.prototype.create=function(e,n){var i=null,r=e,s=this.mapping[r];if(s){i=new s;var o=t.extend({},t.json.clone(s.prototype.__adapt__._option));i.option=t.extend(o,n);for(var a=s.prototype.__adapt__._extendslink.length-1;a>=0;a--){var l=this.mapping[s.prototype.__adapt__._extendslink[a]];l&&l.prototype.init&&l.prototype.init.call(i,i.option)}}return i},C.prototype.instance=function(e,n){var i=null,r=e,s=this.mapping[r];if(s){var o=s.prototype.__adapt__._singleton;if(o){if(!S[e]){var a=new s,l=t.extend({},t.json.clone(s.prototype.__adapt__._option));t.extend(l,n),a.option=l,S[e]=a}i=S[e]}else{i=new s;var l=t.extend({},t.json.clone(s.prototype.__adapt__._option));t.extend(l,n),i.option=l}}return i},C.prototype.invoke=function(t,e,i){var r=null;if(n.isString(t)){var s=this.mapping[t];s&&(r=new s)}else n.isObject(t)&&(r=t);if(r&&r[e]&&n.isFunction(r[e])&&n.isObject(i)){var o=Array.prototype.slice.call(arguments),a=Object.keys(i),l=r;o.splice(0,3);for(var p=0;p<a.length;p++)l[a[p]]=i[a[p]];try{for(var h=l[e].apply(l,o),u=Object.keys(l),p=0;p<u.length;p++)i[u[p]]=l[u[p]];return h}catch(c){return console.error(c.message),null}}return null},C.prototype.proxy=function(t,e,i){if(arguments.length>1){var r=null,s=null;if(n.isString(t)){var o=this.mapping[t];o&&(t=new o)}else if(t instanceof M){for(var a=new this.mapping[t.__adapt__._type],l=Object.keys(t),p=0;p<l.length;p++)a[l[p]]=t[l[p]];t=a}else t=null;if(n.isObject(t)){n.isArray(e)?(r=e,s=i):n.isFunction(e)&&(s=e);var h=new this.mapping[t.__adapt__._type];for(var p in t)n.isFunction(t[p])?(!r||r&&-1!==r.indexOf(p))&&!function(e){h[p]=function(){var n=arguments;s&&s.call(t,{methodName:e,invoke:function(){return t[e].apply(t,n)}})}}(p):h[p]=t[p];return h}return null}return null},C.prototype.has=function(t){return void 0!==this.mapping[t]},t.adapt=function(){return new C};var A=function(){this.dataType="",this.type=null,this.object=null,this.value=null},q=function(t,e,n){return $.is.isObject(e)?q.setObject(t,"",e,null,n):q.setArray(t,"",e,null,n)};q.setunwrite=function(t,e,n){t.hasOwnProperty(e)?t[e]=n:Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!1,value:n})},q.setwrite=function(t,e,n){t.hasOwnProperty(e)?t[e]=n:Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})},q.setObject=function(t,e,n,i,r){for(var s=Object.keys(n),o=0;o<s.length;o++){var a=s[o],l=n[a];q.setObserve(t,a,l,n,r),function(t){n.__defineSetter__(t,function(e){try{this["_*_"].fn&&this["_*_"].fn($.extend(new A,{name:this["_*_"].name,dataType:"object",type:"edit",
object:this,property:t,original:this["_"+t+"_"],value:e}))}catch(n){}this["_"+t+"_"]=e}),n.__defineGetter__(t,function(){return this["_"+t+"_"]})}(a),q.setwrite(n,"_"+a+"_",l)}return q.setunwrite(n,"_*_",{fn:r,key:e,name:t}),q.setunwrite(n,"_+_",i),q.setunwrite(n,"set",function(t,e){var n="edit";return this.hasOwnProperty(t)?this[t]=e:(n="add",q.setwrite(this,"_"+t+"_",q.setObserve(this["_*_"].name,t,e,this,this["_*_"].fn)),this.__defineSetter__(t,function(e){this["_*_"].fn&&this["_*_"].fn($.extend(new A,{name:this["_*_"].name,dataType:"object",type:"edit",object:this,property:t,original:this["_"+t+"_"],value:e})),this["_"+t+"_"]=e}),this.__defineGetter__(t,function(){return this["_"+t+"_"]})),this["_*_"].fn&&this["_*_"].fn($.extend(new A,{name:this["_*_"].name,dataType:"object",type:n,object:this,property:t,original:void 0,value:e})),this}),q.setunwrite(n,"get",function(t){return this["_"+t+"_"]}),q.setunwrite(n,"remove",function(){$.is.isArray(this["_+_"])&&this["_+_"].splice(this["_+_"].indexOf(this),1)}),q.setunwrite(n,"getIndex",function(){return $.is.isArray(this["_+_"])?this["_+_"].indexOf(this):void 0}),q.setunwrite(n,"getPath",function(){for(var t=this,e=[],n=[];t;){var i=t["_*_"].key;-1===i.indexOf("*")?(e.push(i),n.push(i)):e.push(t["_+_"].indexOf(t)),t=t["_+_"]}return e.splice(e.length-1,1),n=n.reverse(),n.splice(0,1),{name:n.join("."),value:e.reverse()}}),n},q.setArray=function(t,e,n,i,r){for(var s=0;s<n.length;s++)n[s]=q.setObserve(t,e+"*",n[s],n,r);return q.setunwrite(n,"_*_",{fn:r,key:e,name:t}),q.setunwrite(n,"_+_",i),q.setunwrite(n,"splice",function(){for(var t=Array.prototype.slice.call(arguments),e=arguments[0],n=[],i="remove",r=arguments[1],s=null,o=2;o<t.length-2;o++)n.push(t[o]);if(n.length>0){for(var o=0;o<t.length;o++)n[o]=q.setObserve(this["_*_"].name,this["_*_"].key+"*",n[o],this,this["_*_"].fn);i="edit",s=n}else{i="remove";for(var a=[],o=arguments[0];o<arguments[0]+arguments[1];o++)a.push(this[o]);s=a}return this["_*_"].fn&&this["_*_"].fn($.extend(new A,{name:this["_*_"].name,dataType:"array",type:i,object:this,original:this,form:e,size:r,value:s})),Array.prototype.splice.apply(this,t)}),q.setunwrite(n,"pop",function(){return this["_*_"].fn&&this["_*_"].fn($.extend(new A,{name:this["_*_"].name,dataType:"array",type:"remove",object:this,original:this,form:this.length-1,size:1})),Array.prototype.pop.call(this)}),q.setunwrite(n,"push",function(t){return this["_*_"].fn&&this["_*_"].fn($.extend(new A,{name:this["_*_"].name,dataType:"array",type:"add",object:this,original:this,form:this.length-1,size:1,value:t})),Array.prototype.push.call(this,q.setObserve(this["_*_"].name,this["_*_"].key+"*",t,this,this["_*_"].fn))}),q.setunwrite(n,"shift",function(){return this["_*_"].fn&&this["_*_"].fn($.extend(new A,{name:this["_*_"].name,dataType:"array",type:"remove",object:this,original:this,form:0,size:1,value:this[0]})),Array.prototype.shift.call(this)}),q.setunwrite(n,"unshift",function(t){return this["_*_"].fn&&this["_*_"].fn($.extend(new A,{name:this["_*_"].name,dataType:"array",type:"add",object:this,original:this,form:0,size:1,value:t})),Array.prototype.push.call(this,q.setObserve(this["_*_"].name,this["_*_"].key+"*",t,this,this["_*_"].fn))}),q.setunwrite(n,"removeAll",function(){return this["_*_"].fn&&this["_*_"].fn($.extend(new A,{name:this["_*_"].name,dataType:"array",type:"remove",object:this,original:this,form:0,size:this.length,value:this})),Array.prototype.shift.call(this)}),q.setunwrite(n,"getPath",function(){for(var t=this,e=[],n=[];t;){var i=t["_*_"].key;-1===i.indexOf("*")?(e.push(i),n.push(i)):e.push(t["_+_"].indexOf(t)),t=t["_+_"]}return e.splice(e.length-1,1),n=n.reverse(),n.splice(0,1),{name:n.join("."),value:e.reverse()}}),n},q.setObserve=function(t,e,n,i,r){return $.is.isArray(n)?q.setArray(t,e,n,i,r):$.is.isObject(n)?q.setObject(t,e,n,i,r):n},t.observe=function(t,e,n){return q(t,e,n)};var I={regs:{a:/^(dom)|^(option)|^(name)|^(extend)|^(init)/},isMutation:function(){return null!==(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver||null)},domInserted:function(t,e){var n=$(e);if(!n.dataset("parentView")){for(var i=!1;t&&t!==window.document;){if(t.datasets&&t.datasets["-view-"]){i=!0;break}t=t.parentNode}if(i){var r=t.datasets["-view-"];r.onnodeinserted&&r.onnodeinserted(e)}}},domRemoved:function(t,e){var n=$(e);if(!n.dataset("parentView")){for(var i=!1,r=t;t&&t!==window.document;){if(t.datasets&&t.datasets["-view-"]){i=!0;break}t=t.parentNode}if(i){var s=t.datasets["-view-"];s.onnoderemoved&&s.onnoderemoved(e,r)}}},factory:t.adapt(),getbrightName:function(t,e){if(t){if(t=t.trim(),""!==t){var n=t.split(".");return n.length>1?(n.splice(n.length-1,1),n.join(".")):t}return""}return""},getArrayUnDuplicate:function(t){for(var e={},n=[],i=0;i<t.length;i++)e[t[i]]=1;for(var i in e)n.push(i);return n},getViewInstance:function(t,e,n){var i=t.dataset("view");if(!i)throw Error("[bright] view can not init.the element has no attribute like view-*");I.get("root",i,e,function(e){t.data("-view-")?n&&n(t.data("-view-")):(e.dom=t,n&&n(e))})},add:function(t){t.tagName||(t.tagName="div"),I.factory.def(t);for(var e=(t.packet&&""!==t.packet?t.packet+".":"")+t.name,n=I.factory.get(e).prototype,i=[t.className||""],r=n.__adapt__._extendslink.length-1;r>=0;r--){var s=I.factory.get(n.__adapt__._extendslink[r]);if(s){var o=s.prototype.className;o&&""!==o&&-1===i.indexOf(o)&&i.push(o)}}n.fullClassName=i.join(" ")},has:function(t){return I.factory.has(t)},get:function(e,n,i,r){if(void 0===n||null===n||""===n)throw Error("[bright] packet name can not undefined or null or ''.");if(I.has(n))r&&r(I.factory.instance(n,i));else{var s=I.getbrightName(n);t.packet({packetName:s,target:e,back:function(){if(r){if(!I.has(n))throw Error("[bright] can not find module with name of "+n+",it is not in the packet of "+I.getbrightName(n)+" or the packet file inited failed.");r(I.factory.instance(n,i))}}})}},task:new p},L={options:{},add:function(t){if(!t.name||""===t.name)throw Error("[bright] option name can not null or ''");L.options[t.name]=t.option},has:function(t){var e=L.options[t];return e?e:!1},get:function(e,n,i){if(void 0!==n&&""!==n&&"null"!==n)if("{"!==n[0]&&"["!==n[0]){var r=L.has(n);if(r===!1){var s=I.getbrightName(n);t.packet({packetName:s,target:e,back:function(){if(i){var t=L.has(n);if(!t)throw Error("[bright] can not find option with name of "+n+",is not in the packet of "+I.getbrightName(n));i(t)}}})}else i&&i(r)}else{var o={};try{o=window.JSON.parse(n)}catch(a){}i&&i(o)}else i&&i(null)}},P=function(t,e,n){this.target=t,this.data=n,this.type=e,this._goon=!0,this.currentTarget=null};P.prototype.clone=function(){return t.extend(new viewevnet,this)},P.prototype.stopPropagation=function(){this._goon=!1};var F=function(){this._data=[]};F.finder=function(t){for(var e=[],n=0;n<t._finders._data.length;n++)t.dom.get(0).contains(t._finders._data[n].get(0))&&e.push(t._finders._data[n]);t._finders._data=e,t.dom.find("[data-find]").each(function(){var e=$(this).dataset("find");$(this).data("-finder-",{name:e}).removeAttr("data-find").attr("finder",e),t._finders._data.push($(this));try{t["find_"+e]&&t["find_"+e]($(this),t._finders)}catch(n){console.error("[bright] view finder called error with module of "+t.type()+" Message:"+n.message)}})},F.group=function(t){for(var e=[],n=0;n<t._groups._data.length;n++)t.dom.get(0).contains(t._groups._data[n].get(0))&&e.push(t._groups._data[n]);t._groups._data=e,t.dom.find("*[data-group]").each(function(){var e=$(this).dataset("group"),n={name:e,items:{}},i=$(this);if($(this).data("-group-",n).removeAttr("data-group").attr("group",e),t._groups._data.push($(this)),$(this).find("*[data-groupi]").each(function(){n.items[$(this).dataset("groupi")]=$(this);var t=$(this).dataset("groupi");$(this).data("-groupitem-",{name:t,group:i}).removeAttr("data-groupi").attr("groupi",t)}),t["group_"+e])try{t["group_"+e]($(this))}catch(r){console.error("[bright] view groups called error with module of "+t.type()+" Message:"+r.message)}})},F.event=function(t){t.dom.find("[data-bind]").each(function(){if(!$(this).data("_eventback_")){var e={},n=$(this).dataset("bind").split(" ");for(var i in n){var r=n[i].split(":"),s=r[0],o=r[1];e[s]=o,$(this).removeAttr("data-bind").bind(s,function(e){var n=$(this).data("_eventback_")[e.type];t["bind_"+n]&&t["bind_"+n].call(t,$(this),e)})}$(this).data("_eventback_",e)}})},I.add({name:"request",request:function(e,i,r){var s=t.promise(),o=!1;s.scope(this);var a={url:"",dataType:"json",data:""};if(t.extend(a,r),n.isString(e)?(o=!0,a.url=e):n.isObject(e)&&(o=!0,t.extend(a,e)),o)return a.data=i,this.doRequest(a,s),s;throw Error("[bright] request parameter error")},doRequest:function(e,n){t.ajax(e).done(function(t){t.code&&"1"===t.code?n.resolve(t.data):n.reject(t)}).fail(function(t){n.reject(t)})},getRequest:function(t,e){return this.request(t,e,"get")},postRequest:function(t,e,n){return n||(n={}),n.type="post",this.request(t,e,n)},putRequest:function(t,e,n){return n||(n={}),n.type="post",this.request(t,e,n)},deleteRequest:function(t,e,n){return n||(n={}),n.type="post",this.request(t,e,n)},patchRequest:function(t,e,n){return n||(n={}),n.type="post",this.request(t,e,n)}}),I.add({name:"view",extend:"request",packet:"",option:{},parentView:null,init:null,template:"",onbeforeinit:null,onendinit:null,onunload:t.nfn,onnoderemoved:null,onnodeinserted:null,onchildremove:null,_render:function(t){if(!this.dom.data("-view-")){this.dom.data("-view-",this),this._finders=new F,this._groups=new F,this.dom.children().length>0&&(this.template=this.dom.html());var e=this.dom.dataset("option"),n=this;if(this.dom.hasClass("_futuretochange_")){this.dom.removeClass("_futuretochange_");var i=this.__adapt__._factory.mapping[this.__adapt__._type].prototype,r=i.fullClassName;if(this.dom.get(0).tagName.toLowerCase()!==this.tagName){var s=$("<"+i.tagName+" class='"+r+"' data-view='"+this.dom.dataset("view")+"' data-parent-view='"+this.dom.dataset("parentView")+"' data-view-id='"+this.dom.dataset("viewId")+"' daa-option='"+this.dom.dataset("option")+"'></"+i.tagName+">");this.dom.get(0).parentNode.replaceChild(s.get(0),this.dom.get(0)),this.dom=s}}this._handlers=[],L.get(this.type(),e,function(e){if(e){n.option.override=e.override||{};for(var i in e)"override"!==i&&(0===i.indexOf("override_")?n.option.override[i.substring(9)]=e[i]:n.option[i]=e[i])}for(var i in n.option.override)I.regs.a.test(i)||(n[i]=n.option.override[i]);if(n.name=n.type(),n.shortname=n.shortName(),"function"==typeof n.onbeforeinit)try{n.onbeforeinit(n.option)}catch(r){console.error("[bright] onbeforeinit called error with module of "+n.type()+" Message:"+r.message)}if(n.className&&""!==n.className&&n.dom.addClass(n.className),"function"==typeof n.init)try{n.init(n.option)}catch(r){console.error("[bright] init called error with module of "+n.type()+" Message:"+r.stack)}if("function"==typeof n.onendinit)try{n.onendinit(n.option)}catch(r){console.error("[bright] onendinit called error with module of "+n.type()+" Message:"+r.message)}t&&t()})}return this},delegate:function(){return F.finder(this),F.group(this),F.event(this),this},getId:function(){return this.dom.dataset("viewId")},getDom:function(){return this.dom},postData:function(e){e.dataType="json";var n=this;t.ajax(e).done(function(t){t.code&&"1"===t.code?e.back&&e.back.call(n,t.data):e.dataerror&&e.dataerror.call(n,t)}).fail(function(t){e.neterror&&e.neterror.call(n)})},triggerEvent:function(t){return t.currentTarget=this,this._handlers[t.type]?this._handlers[t.type].call(this,t):this["event_"+t.type]?this["event_"+t.type].call(this,t):!0},initEvent:function(t,e){var n=new P(this,t,e);return n},dispatchEvent:function(t,e,n){n=void 0===n?!0:n;var i=new P(this,t,e);if(n===!0)for(var r=this;r&&(r.triggerEvent(i),i._goon);)r=r.parentView;else if(this.triggerEvent(i),i._goon&&this.typeOf("viewgroup"))for(var r=0;r<this.children.length;r++)this.children[r].dispatchEvent(t,e,!1)},dispatchSuroundEvent:function(t,e){var n=new P(this,t,e);if(this.parentView)for(var i in this.parentView.children){var r=this.parentView.children[i];if(r.triggerEvent(n),!n._goon)break}},addEventListener:function(t,e){return this._handlers[t]=e,this},removeEventListener:function(t,e){return this._handlers[t]=null,this["event_"+t]&&(this["event_"+t]=null),this},removeAllEventListener:function(){for(var t in this._handlers)this._handlers[t]=null;for(var t in this)0===t.indexOf("event_")&&(this[t]=null);return this},remove:function(){this.dom.remove()},render:function(e){var n=this,i=$.promise();i.scope(this);try{n.onbeforerender&&n.onbeforerender()}catch(r){console.error("[bright] onbeforerender called error with module of "+n.type()+" Message:"+r.message)}try{t.template(n.template).renderTo(n.dom,e),n.delegate()}catch(r){console.error("[bright] render called error with module of "+n.type()+" Message:"+r.message)}try{n.onendrender&&n.onendrender()}catch(r){console.error("[bright] onendrender called error with module of "+n.type()+" Message:"+r.message)}return setTimeout(function(){i.resolve()},0),i},original:function(e){var n=Object.getPrototypeOf(this)[e];if(t.is.isFunction(n)){var i=Array.prototype.slice.call(arguments);return i.splice(0,1),n.apply(this,i)}return n},parentsInvoke:function(e){for(var n=this.parentView,i=null;n;){var r=n[e];if(r&&t.is.isFunction(r)){var s=Array.prototype.slice.call(arguments);s.splice(0,1),i=r.apply(n,s);break}n=n.parentView}return i},parentsParameter:function(t){for(var e=this.parentView,n=null;e&&(n=e.parameters[t],void 0===n);)e=e.parentView;return n},parentViews:function(e){e=t.is.isAvalid(e)?t.is.isNumber(e)?e:parseInt(e):0;for(var n=this.parentView,i=e-1;n&&i>0;)i--,n=n.parentView;return n},previousSibling:function(){if(this.parentView){var t=this.parentView.children.indexOf(this);return 0!==t?this.parentView.children[t-1]:null}return null},nextSibling:function(){if(this.parentView){var t=this.parentView.children.indexOf(this);return t+1<this.parentView.children.length?this.parentView.children[t+1]:null}return null},setStorage:function(t,e){var n="",i=window.localStorage.getItem(this.name);return i?(i=window.JSON.parse(i),i[t]=e,n=window.JSON.stringify(i)):(i={},i[t]=e,n=window.JSON.stringify(i)),window.localStorage.setItem(this.name,n),this},getStorage:function(t){var e=window.localStorage.getItem(this.name);return e=e?window.JSON.parse(e):{},e[t]},removeStorage:function(t){return this.setStorage(t,null)},cleanStorage:function(){return window.localStorage.removeItem(this.name),this},getUUID:function(){return t.util.uuid()},observe:function(e,n){var i=this;return t.observe(e,n,function(t){var n=e+"_"+t.object.getPath().name+(t.property?"."+t.property:"")+"_"+t.type;i[n]&&i[n](t)})},getStaticJson:function(e){var n=t.promise().scope(this);return j.getStaitcFile("json",e,function(t){n.resolve(t)}),n},getStaticHtml:function(e){var n=t.promise().scope(this);return j.getStaitcFile("html",e,function(t){n.resolve(t)}),n},getStaticText:function(e){var n=t.promise().scope(this);return j.getStaitcFile("text",e,function(t){n.resolve(t)}),n},getStaticImage:function(e){var n=t.promise().scope(this);return j.getStaitcFile("image",e,function(t){n.resolve(t)}),n},getStaticPath:function(t,e){return j.getStaticPath(t,e)},clean:function(){try{this.onunload()}catch(t){console.error("[bright] onunload called error with module of "+this.type()+" Message:"+t.stack)}this._finders.length=0,this._groups.length=0;var e=this.parentView;if(e&&e.children){var n=e.children.indexOf(this);if(-1!==n){e.children.splice(n,1);try{e.onchildremove&&e.onchildremove(this)}catch(t){console.error("[bright] onchildremove called error with module of "+e.type()+" Message:"+t.stack)}}}var i=Object.keys(this);for(var r in i)this[i[r]]=null},finders:function(t){for(var e=$(),n=0;n<this._finders._data.length;n++)1===arguments.length?this._finders._data[n].data("-finder-")&&this._finders._data[n].data("-finder-").name===t&&e.add(this._finders._data[n]):e.add(this._finders._data[n]);return e},groups:function(t){for(var e=$(),n=0;n<this._groups._data.length;n++)1===arguments.length?this._groups._data[n].data("-group-")&&this._groups._data[n].data("-group-").name===t&&e.add(this._groups._data[n]):e.add(this._groups._data[n]);return e}}),I.add({name:"viewgroup",extend:"view",layout:null,ondomready:null,onoption:null,oninitchild:null,marcos:{},_render:function(e){if(!this.dom.data("-view-")){this.dom.data("-view-",this),this._finders=new F,this._groups=new F,this._handlers={},this.children=[];var n=this,i=this.dom.dataset("option"),r=t.queue();if(this.dom.hasClass("_futuretochange_")){this.dom.removeClass("_futuretochange_");var s=this.__adapt__._factory.mapping[this.__adapt__._type].prototype,o=s.fullClassName;if(this.dom.get(0).tagName.toLowerCase()!==this.tagName){var a=$("<"+s.tagName+" class='"+o+"' data-view='"+this.dom.dataset("view")+"' data-parent-view='"+this.dom.dataset("parentView")+"' data-view-id='"+this.dom.dataset("viewId")+"' daa-option='"+this.dom.dataset("option")+"'></"+s.tagName+">");this.dom.get(0).parentNode.replaceChild(a.get(0),this.dom.get(0)),this.dom=a}}try{L.get(this.type(),i,function(i){if(n.option||(n.option={}),n.option.override||(n.option.override={}),i){for(var s in i)0===s.indexOf("override_")&&"override"!==s?n.option.override[s.substring(9)]=i[s]:n.option[s]=i[s];for(var s in i.override)n.option.override[s]=i.override[s]}for(var s in n.option.override)I.regs.a.test(s)||(n[s]=n.option.override[s]);if("function"==typeof n.onbeforeinit)try{n.onbeforeinit(n.option)}catch(o){console.error("[bright] onbeforeinit called error with module of "+n.type()+" Message:"+o.stack)}var a=n.layout;if(""===a&&n.dom.children().length>0&&(a=n.dom.html()),t.is.isString(a))try{var l=t.template(a);l.macro(t.extend({module:function(t,e){var i=t.type,r=t.option,s=t.id,o={tagName:"div",fullClassName:"_futuretochange_"};if(n.__adapt__._factory.mapping[i])var o=n.__adapt__._factory.mapping[i].prototype;return"<"+o.tagName+" class='"+o.fullClassName+"' data-parent-view='"+n.getId()+"' data-view='"+i+"' data-view-id='"+(s||n.getId()+"-"+n.children.length)+"' data-option='"+(r||"")+"'></"+o.tagName+">"}},n.marcos)),a=l.fn(new Function("data","pid","option","module",l.code())).render({id:n.getId(),option:n.option},n.getId(),n.option,function(t,e,i){var r={tagName:"div",fullClassName:"_futuretochange_"};if(n.__adapt__._factory.mapping[t])var r=n.__adapt__._factory.mapping[t].prototype;return"<"+r.tagName+" class='"+r.fullClassName+"' data-parent-view='"+n.getId()+"' data-view='"+t+"' data-view-id='"+(i||n.getId()+"-"+n.children.length)+"' data-option='"+(e||"")+"'></"+r.tagName+">"}),n.dom.html(a),l.flush(n.dom)}catch(o){console.error("[bright] parse layout called error with module of "+n.type()+" Message:"+o.stack),n.dom.html("")}if("function"==typeof n.ondomready)try{n.ondomready(n.option)}catch(o){console.error("[bright] ondomready called error with module of "+n.type()+" Message:"+o.stack)}if("function"==typeof n.onnodeinserted)try{n.onnodeinserted(n.dom)}catch(o){console.error("[bright] onnodeinserted called error with module of "+n.type()+" Message:"+o.stack)}r.complete(function(t){if(t.name=t.type(),t.shortname=t.shortName(),t.delegate(),t.className&&""!==t.className&&t.dom.addClass(t.className),"function"==typeof t.init)try{t.init(t.option)}catch(i){console.error("[bright] init called error with module of "+n.type()+" Message:"+i.stack)}if("function"==typeof t.onendinit)try{t.onendinit(t.option)}catch(i){console.error("[bright] onendinit called error with module of "+n.type()+" Message:"+i.stack)}e&&e()}),n.dom.find("*[data-parent-view='"+n.getId()+"']").each(function(){r.add(function(e,i){var r=this,s={},o=i.dataset("view"),a=i.dataset("viewId");if(e.oninitchild)try{e.oninitchild({id:a,type:o})}catch(l){console.error("[bright] oninitchild called error with module of "+n.type()+" Message:"+l.stack)}I.get(e.type(),o,null,function(l){for(var p=l.__adapt__._extendslink.length-1;p>=0;p--)t.extend(s,e.option[l.__adapt__._extendslink[p]]);t.extend(s,e.option[a]);var h=null;if("function"==typeof e.onoption)try{h=e.onoption.call(e,s,o,a),t.extend(s,h)}catch(u){console.error("[bright] onoption called error with module of "+n.type()+" Message:"+u.stack)}if(t.extend(l.option,s),i.data("-view-"))r.next(e);else{var c=l;c.dom=i,c.parentView=e,e.children.push(c),c.privator("render",function(){r.next(e)})}})},function(){this.next(n)},t(this))}),r.run(n)})}catch(l){e&&e(),console.error(l.stack)}}return this},_addChild:function(e,i){var r=this,s=t.extend({type:null,option:"",parameters:null,id:this.getId()+"-"+this.children.length,container:"body",domIndex:null,target:null,index:null},e),o=s.index;s.container.isWrapper&&!s.container.isWrapper()&&(s.container="body");try{I.get(r.type(),s.type,null,function(e){void 0===o||null===o||o>=r.children.length?r.children.push(e):r.children.splice(o,0,e);var a=e.__adapt__._factory.mapping[e.__adapt__._type].prototype.fullClassName,l=t(s.container),p=t("<"+e.tagName+" class='"+a+"' data-parent-view='"+r.getId()+"' data-view='"+s.type+"' data-view-id='"+s.id+"' data-option='"+(n.isObject(s.option)?"":s.option)+"'></"+e.tagName+">");if(n.isNumber(s.domIndex)){var h=l.children(s.domIndex);h.length>0?e.dom=p.insertBefore(h):e.dom=p.appendTo(l,!1)}else e.dom=p.appendTo(l,!1);for(var u={},c=e.__adapt__._extendslink.length-1;c>=0;c--)t.extend(u,r.option[e.__adapt__._extendslink[c]]);if(t.extend(u,t.json.clone(e.__adapt__._option)),t.extend(u,r.option[s.id]),t.extend(u,r.option[s.type]),n.isObject(s.option)){var d={};d.override=s.option.override||{};for(var c in s.option)"override"!==c&&(0===c.indexOf("override_")?d.override[c.substring(9)]=s.option[c]:d[c]=s.option[c]);e.option=t.extend(u,d);for(var c in e.option.override)I.regs.a.test(c)||(e[c]=e.option.override[c])}r.dom.contain(e.dom)||(e.___outer___=!0),e.option=u,e.parameters=s.parameters,e.target=s.target,e.parentView=r,e.privator("render",function(){if("function"==typeof r.oninitchild)try{r.oninitchild({id:e.getId(),type:e.type()})}catch(t){console.error("[bright] oninitchild called error with module of "+r.type()+" ["+t.message+"]")}i&&i.call(e)})})}catch(a){i&&i.call(null),console.error(a.stack)}},render:function(){var t=$.promise();return t.scope(this),this.dom.unbind(),this.dom.get(0).datasets={},this.privator("render",function(){t.resolve()}),t},getChildrenByType:function(t){for(var e=[],n=0;n<this.children.length;n++)this.children[n].typeOf(t)&&e.push(this.children[n]);return e},getChildByType:function(t,e){return e=void 0===e||e===e?0:e,this.getChildrenByType(t)[e]},getChildById:function(t){for(var e=null,n=0;n<this.children.length;n++)if(this.children[n].getId()===t){e=this.children[n];break}return e},getChildAt:function(e){return t.is.isNumber(e)&&e>=0&&e<this.children.length?this.children[e]:null},childEach:function(t){for(var e=0;e<this.children.length&&t&&t.call(this.children[e],this.children[e],e,this.children)!==!1;e++);},contains:function(t){return-1!==this.children.indexOf(t)},getFirstChild:function(e){return t.is.isAvalid(e)?this.getChildrenByType(e)[0]:this.children[0]},getLastChild:function(e){var n=null;if(t.is.isAvalid(e)){var i=this.getChildrenByType(e);i.length>0&&(n=i[i.length-1])}else this.children.length>0&&(n=this.children[this.children.length-1]);return n},getChildIndex:function(t){return this.children.indexOf(t)},addChild:function(t){var e=this,n=new h;return n.scope(this),I.task.add(function(t,i){var r=this;e.privator("addChild",i,function(){r.next(),n.resolve(this)})},null,t),n},setChildIndex:function(t,e){if(void 0!==e&&null!==e&&e<this.children.length-1){var n=this.children.indexOf(t);this.children.splice(n,1),this.children.splice(e,0,t)}return this},duplicateChild:function(e,n){return e&&this.privator("addChild",null,{type:this.name,option:t.extend({},this.option),parameters:this.parameters,id:n||this.getId()+"-"+this.children.length,container:this.dom.parent()}),this},removeChild:function(t){var e=this.getChildById(t);return e&&e.remove(),this},removeChildAt:function(e){return t.is.isNumber(e)&&e>0&&e<this.children.length&&this.children[e].remove(),this},removeAllChild:function(){for(;this.children.length>0;)this.children.pop().remove();return this},clean:function(){var t=[];for(var e in this.children)this.children[e].___outer___&&t.push(this.children[e]);for(;t.length>0;)t.pop().remove();try{this.onunload()}catch(n){console.error("[bright] onunload called error with module of "+this.type()+" Message:"+n.stack)}var i=this.parentView;if(i&&i.children){var r=i.children.indexOf(this);if(-1!==r){i.children.splice(r,1);try{i.onchildremove&&i.onchildremove(this)}catch(n){console.error("[bright] onchildremove called error with module of "+i.type()+" Message:"+n.stack)}}}var s=Object.keys(this);for(var e in s)this[s[e]]=null}}),I.add({name:"root",extend:"viewgroup",className:"root",init:function(){I.isMutation()?this.dom.mutationObserve(function(t){for(var e=0;e<t.length;e++){for(var n=t[e],i=n.addedNodes,r=n.removedNodes,s=0;s<i.length;s++)I.domInserted(i[s].parentNode,i[s]);for(var s=0;s<r.length;s++)I.domRemoved(n.target,r[s])}},{childList:!0,subtree:!0}):this.dom.bind("DOMNodeInserted",function(t){I.domInserted(t.target.parentNode,t.target)}).bind("DOMNodeRemoved",function(t){I.domRemoved(t.path[1],t.target)}),console.log("[bright] root view init.")}});var D=function(){};D.prototype.clean=function(){this.dom.data("__name__",null);for(var t in this)this[t]=null},t.Plugin=function(t){if(t&&t.name&&""!==t.name){var e=new Function("dom","option","this.__name__='"+t.name+"';this.dom=dom;this.option=$.extend({},this.option,option);dom.data('"+t.name+"',this);this.init&&this.init(dom,option);");e.prototype=new D;for(var n in t)e.prototype[n]=t[n];$.fn[t.name]=function(n){if(this.data(t.name)&&this.data(t.name).singleton===!0)return this.data(t.name);var i=new e(this,n);return this.data(t.name,i),i}}},t.Method=function(t){t&&t.name&&""!==t.name&&($[t.name]=function(e){return n.isFunction(t.action)?t.action(e):null})};var R={};window.Function.prototype.bind||(window.Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function(){return n.apply(this instanceof r?this:t,e.concat(Array.prototype.slice.call(arguments)))},r=function(){};return this.prototype&&(r.prototype=this.prototype),i.prototype=new r,i}),t.overrideRequest=function(t){var e=I.factory.get("request"),n=I.factory.get("view"),i=I.factory.get("viewgroup"),r=I.factory.get("root");for(var s in t)"init"!==s&&"option"!==s&&"extend"!==s&&(e.prototype[s]=t[s],n.prototype[s]=t[s],i.prototype[s]=t[s],r.prototype[s]=t[s])},t.overrideView=function(t){var e=I.factory.get("view"),n=I.factory.get("viewgroup"),i=I.factory.get("root");for(var r in t)"init"!==r&&"option"!==r&&"extend"!==r&&(e.prototype[r]=t[r],n.prototype[r]=t[r],i.prototype[r]=t[r])},t.overrideViewGroup=function(t){var e=I.factory.get("viewgroup");for(var n in t)"init"!==n&&"option"!==n&&"extend"!==n&&(e.prototype[n]=t[n])},t.overrideRoot=function(t){var e=I.factory.get("root");for(var n in t)"init"!==n&&"option"!==n&&"extend"!==n&&(e.prototype[n]=t[n])},t.Option=function(e){if(n.isString(e)){var i=L.has(e);return i?r.clone(i):null}var s=e.option,o=[];e.extend&&(n.isString(e.extend)?o.push(e.extend):o=e.extend);for(var a=0;a<o.length;a++){var i=L.has(o[a]);if(!i)throw Error("[bright ] can not find option with name of "+o[a]);t.extend(s,r.clone(i))}for(var a in e.override)for(var l=a.split("."),p=s,h=0;h<=l.length-1;h++){var u=l[h],c=p[u];n.isObject(c)||(p[u]={}),h===l.length-1?p[u]=e.override[a]:p=p[u]}t.___info&&(e.name=(t.___info.packet?t.___info.packet+".":"")+e.name),L.add(e)},t.Module=function(e){t.___info&&(e.packet=t.___info.packet),I.add(e)},t.override=function(e,i){n.isString(e)&&n.isObject(i)&&(R[e]?t.extend(R[e],i):R[e]=t.extend(new f,i))},t.toggle=function(t){n.isString(t)?R[t]&&(u.prototype=R[t]):u.prototype=new f},t.global={},t.fn=f.prototype,window.bright=t,window.$=t}();