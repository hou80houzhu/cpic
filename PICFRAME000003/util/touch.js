/*!
 * @packet util.touch;
 */var currentTime=function(){return(new Date).getTime()},eventAgent={events:function(){return/AppleWebKit.*Mobile.*/.test(window.navigator.userAgent)?{type:"mobile",down:"touchstart",move:"touchmove",up:"touchend"}:{type:"pc",down:"mousedown",move:"mousemove",up:"mouseup"}}(),onmove:function(t){return this.dom.bind(eventAgent.events.move,eventAgent._move),this},ondown:function(t){return this.dom.bind(eventAgent.events.down,eventAgent._down),this},onup:function(t){return this.dom.bind(eventAgent.events.up,eventAgent._up),this},type:function(){return eventAgent.events.type},_down:function(t){var i=t.currentTarget.datasets._touch_;t.action="down",i.direction="none",t.direction=i.direction,i.isdown=!0,i.ismove=!1,i.movefirst=!0,i.itime=currentTime(),i.xis=t.touches?t.touches[0].pageX:t.pageX,i.yis=t.touches?t.touches[0].pageY:t.pageY,i.cxis=i.xis,i.cyis=i.yis,t.xis=i.xis,t.yis=i.yis,i._x=i.xis,i._y=i.yis,i._ontouch.call(i.dom,t)},_move:function(t){var i=t.currentTarget.datasets._touch_;if(i.isdown){t.action="move",i.ismove=!0,i.cxis=t.touches?t.touches[0].pageX:t.pageX,i.cyis=t.touches?t.touches[0].pageY:t.pageY,t.xis=i.cxis,t.yis=i.cyis,t.offsetX=i.cxis-i.xis,t.offsetY=i.cyis-i.yis,i.movefirst&&(i.movefirst=!1,Math.abs(t.offsetX)>Math.abs(t.offsetY)?i.oishv="h":i.oishv="v","h"===i.oishv?i.cxis>i.xis?i.odirection="right":i.odirection="left":i.cyis>i.yis?i.odirection="bottom":i.odirection="top");var e=i.cxis-i._x,n=i.cyis-i._y;Math.abs(e)>Math.abs(n)?i.ishv="h":i.ishv="v","h"===i.ishv?i.cxis>i._x?i.direction="right":i.direction="left":i.cyis>i._y?i.direction="bottom":i.direction="top",t.direction=i.direction,t.odirection=i.odirection,i._x=i.cxis,i._y=i.cyis,i._ontouch.call(i.dom,t)}},_up:function(t){var i=t.currentTarget.datasets._touch_;i.isdown&&(t.action="up",i.isdown=!1,t.timeLast=(new Date).getTime()-i.itime,t.offsetY=i.cyis-i.yis,t.offsetX=i.cxis-i.xis,t.ismove=i.ismove,t.xis=i.cxis,t.yis=i.cyis,t.direction=i.direction,t.odirection=i.odirection,i._ontouch.call(i.dom,t),i.ismove=!1)}};$.fn.touch=function(t){if(this.data("_touch_"))return this.data("_touch_");var i=new agent(this,t);return this.data("_touch_",i),i},$.fn.untouch=function(){this.data("_touch_",null),this.unbind(eventAgent.events.up),this.unbind(eventAgent.events.down),this.unbind(eventAgent.events.move)};var agent=function(t,i){return this.dom=t,this._ontouch=i,this.xis=0,this.yis=0,this.cxis=0,this.cyis=0,this.direction="",this.isdown=!1,this.ismove=!1,this.itime=0,this.movefirst=!1,this.ishv="h",this.dom.css({"-webkit-user-select":"none","-webkit-touch-callout":"none","-webkit-user-drag":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)"}),eventAgent.ondown.call(this),eventAgent.onmove.call(this),eventAgent.onup.call(this),this};agent.prototype.ontouch=function(t){return this._ontouch=t,this};var onetimeis=!0;$.fn.button=function(t,i,e){var n={propagation:!1};$.extend(n,e);var o=this.data("_button_event_");if(t){var s=this;o||(this.data("_button_event_",t),this.touch(function(e){$("body").find("input").each(function(){$(this).get(0).blur()});var o=s.width()/2,c=o/2,a=2*o,u=a/2,r=s.offset();if("down"===e.action&&n.propagation&&e.stopPropagation(),"up"===e.action&&onetimeis&&!e.ismove&&e.timeLast>30){onetimeis=!1,e.stopPropagation(),"static"===s.css("position")&&s.css({position:"relative",overflow:"hidden"});var h=$("<div style='position:absolute;left:0;top:0;right:0;bottom:0;background:rgba(250,250,250,.1);'><div style='width:"+o+"px;height:"+o+"px;position:absolute;left:"+(e.xis-r.left)+"px;top:50%;margin-left:-"+c+"px;margin-top:-"+c+"px;z-index:999999999;background:#B7B2B2;opacity:0.5;-webkit-border-radius:"+c+"px'></div></div>").appendTo(s);setTimeout(function(){h.children(0).transition().all().done(function(){t&&t.call(s,e,i),this.parent().remove()}).scope().css({width:a+"px",height:a+"px","margin-left":-u+"px","margin-top":-u+"px",opacity:"0","-webkit-border-radius":u+"px"}),setTimeout(function(){onetimeis=!0},500)},100)}}))}else o.call(this,null,i)},$.fn.swipeLeft=function(t){return this.touch(function(i){"up"===i.action&&(this.find("span").html(i.direction),i.timeLast<200&&"left"===i.direction&&t&&t.call(this)),i.preventDefault()}),this},$.fn.swipeRight=function(t){return this.touch(function(i){"up"===i.action&&(this.find("span").html(i.direction),i.timeLast<200&&"right"===i.direction&&t&&t.call(this)),i.preventDefault()}),this},$.fn.swipeTop=function(){return this.touch(function(t){"up"===t.action&&t.timeLast<200&&"top"===t.direction&&fn&&fn.call(this),t.preventDefault()}),this},$.fn.swipeBottom=function(){return this.touch(function(t){"up"===t.action&&t.timeLast<200&&"bottom"===t.direction&&fn&&fn.call(this),t.preventDefault()}),this},$.fn.tap=function(t){return this.touch(function(i){"up"===i.action&&!i.ismove&&i.timeLast<200&&t&&t.call(this,i),i.preventDefault(),i.stopPropagation()}),this},$.fn.longTap=function(t){return this.touch(function(i){"up"===i.action&&!i.ismove&&i.timeLast>=500&&t&&t.call(this,i),i.preventDefault()}),this},$.fn.doubleTap=function(t){var i=0;return this.touch(function(e){"down"===e.action||"up"===e.action&&!e.ismove&&e.timeLast<200&&(i++,2===i&&(t&&t.call(this),i=0)),e.preventDefault()}),this};